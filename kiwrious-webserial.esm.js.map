{
  "version": 3,
  "sources": ["../node_modules/jsfft/dist/complex_array.js", "../node_modules/jsfft/dist/fft.js", "../src/service/SerialHexValue.ts", "../src/service/SerialRawValue.ts", "../src/service/SerialUtil.ts", "../src/service/SerialReader.ts", "../src/service/SerialDecoder.ts", "../src/decoder/SerialHumidityDecoder.ts", "../src/decoder/SerialUVDecoder.ts", "../src/decoder/SerialVOCDecoder.ts", "../src/decoder/SerialConductivityDecoder.ts", "../src/processing/HeartRateProcessor.ts", "../src/decoder/SerialHeartRateDecoder.ts", "../src/processing/MinValueThreshold.ts", "../src/decoder/SerialHeartRate2Decoder.ts", "../src/decoder/SerialTemperatureDecoder.ts", "../src/decoder/SerialTemperature2Decoder.ts", "../src/service/ValueReader.ts", "../src/service/SerialDecoderFactory.ts", "../src/service/SerialService.ts", "../src/index.ts"],
  "sourcesContent": ["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ComplexArray = function () {\n  function ComplexArray(other) {\n    var arrayType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Float32Array;\n\n    _classCallCheck(this, ComplexArray);\n\n    if (other instanceof ComplexArray) {\n      // Copy constuctor.\n      this.ArrayType = other.ArrayType;\n      this.real = new this.ArrayType(other.real);\n      this.imag = new this.ArrayType(other.imag);\n    } else {\n      this.ArrayType = arrayType;\n      // other can be either an array or a number.\n      this.real = new this.ArrayType(other);\n      this.imag = new this.ArrayType(this.real.length);\n    }\n\n    this.length = this.real.length;\n  }\n\n  _createClass(ComplexArray, [{\n    key: 'toString',\n    value: function toString() {\n      var components = [];\n\n      this.forEach(function (value, i) {\n        components.push('(' + value.real.toFixed(2) + ', ' + value.imag.toFixed(2) + ')');\n      });\n\n      return '[' + components.join(', ') + ']';\n    }\n  }, {\n    key: 'forEach',\n    value: function forEach(iterator) {\n      var n = this.length;\n      // For gc efficiency, re-use a single object in the iterator.\n      var value = Object.seal(Object.defineProperties({}, {\n        real: { writable: true }, imag: { writable: true }\n      }));\n\n      for (var i = 0; i < n; i++) {\n        value.real = this.real[i];\n        value.imag = this.imag[i];\n        iterator(value, i, n);\n      }\n    }\n\n    // In-place mapper.\n\n  }, {\n    key: 'map',\n    value: function map(mapper) {\n      var _this = this;\n\n      this.forEach(function (value, i, n) {\n        mapper(value, i, n);\n        _this.real[i] = value.real;\n        _this.imag[i] = value.imag;\n      });\n\n      return this;\n    }\n  }, {\n    key: 'conjugate',\n    value: function conjugate() {\n      return new ComplexArray(this).map(function (value) {\n        value.imag *= -1;\n      });\n    }\n  }, {\n    key: 'magnitude',\n    value: function magnitude() {\n      var mags = new this.ArrayType(this.length);\n\n      this.forEach(function (value, i) {\n        mags[i] = Math.sqrt(value.real * value.real + value.imag * value.imag);\n      });\n\n      return mags;\n    }\n  }]);\n\n  return ComplexArray;\n}();\n\nexports.default = ComplexArray;", "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ComplexArray = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.FFT = FFT;\nexports.InvFFT = InvFFT;\nexports.frequencyMap = frequencyMap;\n\nvar _complex_array = require('./complex_array');\n\nvar _complex_array2 = _interopRequireDefault(_complex_array);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// Math constants and functions we need.\nvar PI = Math.PI;\nvar SQRT1_2 = Math.SQRT1_2;\n\nfunction FFT(input) {\n  return ensureComplexArray(input).FFT();\n};\n\nfunction InvFFT(input) {\n  return ensureComplexArray(input).InvFFT();\n};\n\nfunction frequencyMap(input, filterer) {\n  return ensureComplexArray(input).frequencyMap(filterer);\n};\n\nvar ComplexArray = exports.ComplexArray = function (_baseComplexArray) {\n  _inherits(ComplexArray, _baseComplexArray);\n\n  function ComplexArray() {\n    _classCallCheck(this, ComplexArray);\n\n    return _possibleConstructorReturn(this, (ComplexArray.__proto__ || Object.getPrototypeOf(ComplexArray)).apply(this, arguments));\n  }\n\n  _createClass(ComplexArray, [{\n    key: 'FFT',\n    value: function FFT() {\n      return fft(this, false);\n    }\n  }, {\n    key: 'InvFFT',\n    value: function InvFFT() {\n      return fft(this, true);\n    }\n\n    // Applies a frequency-space filter to input, and returns the real-space\n    // filtered input.\n    // filterer accepts freq, i, n and modifies freq.real and freq.imag.\n\n  }, {\n    key: 'frequencyMap',\n    value: function frequencyMap(filterer) {\n      return this.FFT().map(filterer).InvFFT();\n    }\n  }]);\n\n  return ComplexArray;\n}(_complex_array2.default);\n\nfunction ensureComplexArray(input) {\n  return input instanceof ComplexArray && input || new ComplexArray(input);\n}\n\nfunction fft(input, inverse) {\n  var n = input.length;\n\n  if (n & n - 1) {\n    return FFT_Recursive(input, inverse);\n  } else {\n    return FFT_2_Iterative(input, inverse);\n  }\n}\n\nfunction FFT_Recursive(input, inverse) {\n  var n = input.length;\n\n  if (n === 1) {\n    return input;\n  }\n\n  var output = new ComplexArray(n, input.ArrayType);\n\n  // Use the lowest odd factor, so we are able to use FFT_2_Iterative in the\n  // recursive transforms optimally.\n  var p = LowestOddFactor(n);\n  var m = n / p;\n  var normalisation = 1 / Math.sqrt(p);\n  var recursive_result = new ComplexArray(m, input.ArrayType);\n\n  // Loops go like O(n \u03A3 p_i), where p_i are the prime factors of n.\n  // for a power of a prime, p, this reduces to O(n p log_p n)\n  for (var j = 0; j < p; j++) {\n    for (var i = 0; i < m; i++) {\n      recursive_result.real[i] = input.real[i * p + j];\n      recursive_result.imag[i] = input.imag[i * p + j];\n    }\n    // Don't go deeper unless necessary to save allocs.\n    if (m > 1) {\n      recursive_result = fft(recursive_result, inverse);\n    }\n\n    var del_f_r = Math.cos(2 * PI * j / n);\n    var del_f_i = (inverse ? -1 : 1) * Math.sin(2 * PI * j / n);\n    var f_r = 1;\n    var f_i = 0;\n\n    for (var _i = 0; _i < n; _i++) {\n      var _real = recursive_result.real[_i % m];\n      var _imag = recursive_result.imag[_i % m];\n\n      output.real[_i] += f_r * _real - f_i * _imag;\n      output.imag[_i] += f_r * _imag + f_i * _real;\n\n      var _ref = [f_r * del_f_r - f_i * del_f_i, f_i = f_r * del_f_i + f_i * del_f_r];\n      f_r = _ref[0];\n      f_i = _ref[1];\n    }\n  }\n\n  // Copy back to input to match FFT_2_Iterative in-placeness\n  // TODO: faster way of making this in-place?\n  for (var _i2 = 0; _i2 < n; _i2++) {\n    input.real[_i2] = normalisation * output.real[_i2];\n    input.imag[_i2] = normalisation * output.imag[_i2];\n  }\n\n  return input;\n}\n\nfunction FFT_2_Iterative(input, inverse) {\n  var n = input.length;\n\n  var output = BitReverseComplexArray(input);\n  var output_r = output.real;\n  var output_i = output.imag;\n  // Loops go like O(n log n):\n  //   width ~ log n; i,j ~ n\n  var width = 1;\n  while (width < n) {\n    var del_f_r = Math.cos(PI / width);\n    var del_f_i = (inverse ? -1 : 1) * Math.sin(PI / width);\n    for (var i = 0; i < n / (2 * width); i++) {\n      var f_r = 1;\n      var f_i = 0;\n      for (var j = 0; j < width; j++) {\n        var l_index = 2 * i * width + j;\n        var r_index = l_index + width;\n\n        var left_r = output_r[l_index];\n        var left_i = output_i[l_index];\n        var right_r = f_r * output_r[r_index] - f_i * output_i[r_index];\n        var right_i = f_i * output_r[r_index] + f_r * output_i[r_index];\n\n        output_r[l_index] = SQRT1_2 * (left_r + right_r);\n        output_i[l_index] = SQRT1_2 * (left_i + right_i);\n        output_r[r_index] = SQRT1_2 * (left_r - right_r);\n        output_i[r_index] = SQRT1_2 * (left_i - right_i);\n\n        var _ref2 = [f_r * del_f_r - f_i * del_f_i, f_r * del_f_i + f_i * del_f_r];\n        f_r = _ref2[0];\n        f_i = _ref2[1];\n      }\n    }\n    width <<= 1;\n  }\n\n  return output;\n}\n\nfunction BitReverseIndex(index, n) {\n  var bitreversed_index = 0;\n\n  while (n > 1) {\n    bitreversed_index <<= 1;\n    bitreversed_index += index & 1;\n    index >>= 1;\n    n >>= 1;\n  }\n  return bitreversed_index;\n}\n\nfunction BitReverseComplexArray(array) {\n  var n = array.length;\n  var flips = new Set();\n\n  for (var i = 0; i < n; i++) {\n    var r_i = BitReverseIndex(i, n);\n\n    if (flips.has(i)) continue;\n\n    var _ref3 = [array.real[r_i], array.real[i]];\n    array.real[i] = _ref3[0];\n    array.real[r_i] = _ref3[1];\n    var _ref4 = [array.imag[r_i], array.imag[i]];\n    array.imag[i] = _ref4[0];\n    array.imag[r_i] = _ref4[1];\n\n\n    flips.add(r_i);\n  }\n\n  return array;\n}\n\nfunction LowestOddFactor(n) {\n  var sqrt_n = Math.sqrt(n);\n  var factor = 3;\n\n  while (factor <= sqrt_n) {\n    if (n % factor === 0) return factor;\n    factor += 2;\n  }\n  return n;\n}", "\nexport class SerialHexValue {\n  rawHexValue: string;\n\n  constructor(rawHexValue: string) {\n    this.rawHexValue = rawHexValue;\n  }\n\n  toFloat(): number {\n    const raw = Number(this.rawHexValue);\n\n    const s = raw & 0x80000000 ? -1 : 1;\n    const e = ((raw >> 23) & 0xff) - 127;\n    const c = 1 + (raw & 0x7fffff) / 0x7fffff;\n    return s * c * Math.pow(2, e);\n  }\n\n  toInt(): number {\n    return Number((parseInt(this.rawHexValue)).toFixed());\n  }\n\n  divideByHundred(): number {\n    return Number((parseInt(this.rawHexValue) / 100).toFixed());\n  }\n}\n\nexport class SerialNumberValue {\n  private readonly _raw: number;\n\n  constructor(value: number) {\n    this._raw = value;\n  }\n\n  get value() {\n    return this._raw;\n  }\n\n  toInt(): number {\n    return Number(this._raw.toFixed());\n  }\n\n  divideByHundred(): number {\n    return Number((this._raw / 100).toFixed());\n  }\n}\n", "import { SerialHexValue } from \"./SerialHexValue\";\n\nexport const SENSOR_TYPE = {\n    UNKNOWN: 'UNKNOWN',\n    UV: 'UV',\n    UV2: 'UV2',\n    HUMIDITY: 'HUMIDITY',\n    VOC: 'VOC',\n    CONDUCTIVITY: 'CONDUCTIVITY',\n    HEART_RATE: 'HEART_RATE',\n    HEART_RATE2: 'HEART_RATE2',\n    TEMPERATURE: 'TEMPERATURE',\n    TEMPERATURE2: 'TEMPERATURE2',\n    // TODO: other sensor types\n};\n\nexport const SENSOR_VALUE = {\n    UNKNOWN: 'UNKNOWN',\n    UV_INDEX: 'Uv',\n    LUX: 'Lux',\n    HUMIDITY: 'Hum',\n    TEMPERATURE: 'Temp',\n    VOC: 'Voc',\n    CONDUCTIVITY: 'Con',\n    HEART_RATE: 'HeartRate',\n    INFRARED_TEMPERATURE: 'InfraredTemp',\n    AMBIENT_TEMPERATURE: 'AmbientTemp',\n}\n\n// sensor version = undefined indicates sensor is having the initial firmware\nexport const LATEST_SENSOR_VERSION = new Map([\n    ['UV', 2],\n    ['HUMIDITY', undefined],\n    ['VOC', undefined],\n    ['CONDUCTIVITY', undefined],\n    ['HEART_RATE', 2],\n    ['TEMPERATURE', 2]\n]);\n\nexport class SerialRawValue {\n    rawValue: Uint8Array;\n    dataView: DataView;\n\n    constructor(rawValue: Uint8Array) {\n        this.rawValue = rawValue;\n        this.dataView = new DataView(rawValue.buffer);\n\n        if (!this.isValidLength) {\n            throw new Error(`invalid array length. expected [] but got [${rawValue.length}]`);\n        }\n    }\n\n    get isValidLength(): boolean {\n        return this.rawValue.length === 26;\n    }\n\n    get sensorTypeRaw(): number {\n        return this.rawValue[2];\n    }\n\n    get header2Bytes(): number {\n        return this.getTwoBytesByIndex(0);\n    }\n\n    get sequence2Bytes(): number {\n        return this.getTwoBytesByIndex(22);\n    }\n\n    get footer2Bytes(): number {\n        return this.getTwoBytesByIndex(24);\n    }\n\n    get decoderType(): string {\n        switch (this.sensorTypeRaw) {\n            case 1: return SENSOR_TYPE.UV;\n            case 2: return SENSOR_TYPE.TEMPERATURE;\n            case 4: return SENSOR_TYPE.CONDUCTIVITY;\n            case 5: return SENSOR_TYPE.HEART_RATE;\n            case 6: return SENSOR_TYPE.VOC;\n            case 7: return SENSOR_TYPE.HUMIDITY;\n            case 9: return SENSOR_TYPE.TEMPERATURE2;\n\n            // updated firmware sensor\n            case 10: return SENSOR_TYPE.HEART_RATE2;\n            case 11: return SENSOR_TYPE.UV2;\n            // TODO OTHER SENSORS\n\n            default:\n                throw new Error(`invalid sensor type ${this.sensorTypeRaw}`)\n        }\n    }\n\n    get isFirmwareOutdated(): boolean {\n        const regex = /\\d$/gm;\n        let currentSensorVersion = this.decoderType.match(regex)?.toString();\n        return currentSensorVersion != LATEST_SENSOR_VERSION.get(this.sensorType);\n    }\n\n    get sensorType(): string {\n        const regex = /\\d$/gm;\n        const sensorName = this.decoderType.replace(regex, '');\n        return sensorName;\n    }\n\n    // For humidity and temp sensor\n    getTwoBytesSignedByIndex(index: number): number {\n        const value = this.dataView.getInt16(index, true);\n\n        return value;\n    }\n\n    getTwoBytesUnsignedByIndex(index: number): number {\n        const value = this.dataView.getUint16(index, true);\n\n        return value;\n    }\n\n    getTwoBytesByIndex(index: number): number {\n        const value = this.dataView.getUint16(index, true);\n\n        return value;\n    }\n\n    getFourBytesByIndex(index: number): number {\n        const value = this.dataView.getUint32(index, true);\n        return value;\n    }\n\n    getFourBytesFloatByIndex(index: number): number {\n        const value = this.dataView.getFloat32(index, true);\n        return value;\n    }\n\n\n    sliceBytes(index: number, numberOfBytes: number): Uint8Array {\n        if (index + numberOfBytes > this.rawValue.length) {\n            throw new Error(`invalid index [${index}] for array length [${this.rawValue.length}]`);\n        }\n\n        const sliced = this.rawValue.slice(index, index + numberOfBytes);\n\n        return sliced;\n    }\n\n\n    getByteByIndex(index: number): number {\n        if (index >= this.rawValue.length) {\n            throw new Error(`invalid index [${index}] for array length [${this.rawValue.length}]`);\n        }\n\n        const value = this.rawValue[index];\n\n        return value;\n    }\n\n    getHexDigitByIndex(index: number): string {\n        if (index >= this.rawValue.length) {\n            throw new Error(`invalid index [${index}] for array length [${this.rawValue.length}]`);\n        }\n\n        const value16 = this.rawValue[index]\n            .toString(16)\n            .padStart(2, '0');\n\n        return value16;\n    }\n\n    // obsolete, use getTwoBytesByIndex() istead\n    // TODO: refactor to use getTwoBytesByIndex()\n    getHexString2(index0: number, index1: number): SerialHexValue {\n        const data0_a = this.getHexDigitByIndex(index0);\n        const data0_b = this.getHexDigitByIndex(index1);\n\n        const data0 = `0x${data0_a}${data0_b}`;\n        return new SerialHexValue(data0);\n    }\n\n    // obsolete, use getFourBytesByIndex() istead\n    // TODO: refactor to use getFourBytesByIndex()\n    getHexString4(index0: number, index1: number, index2: number, index3: number): SerialHexValue {\n        const data0_a = this.getHexDigitByIndex(index0);\n        const data0_b = this.getHexDigitByIndex(index1);\n        const data0_c = this.getHexDigitByIndex(index2);\n        const data0_d = this.getHexDigitByIndex(index3);\n\n        const data0 = `0x${data0_a}${data0_b}${data0_c}${data0_d}`;\n        return new SerialHexValue(data0);\n    }\n}\n\n", "export class SerialUtil {\n  static concatArray(a: Uint8Array, b: Uint8Array): Uint8Array {\n    const c = new Uint8Array(a.length + b.length);\n    c.set(a, 0);\n    c.set(b, a.length);\n\n    return c;\n  }\n\n\n  static concatMultiArrays(arrays: Uint8Array[]): Uint8Array {\n    const totalLen = arrays.reduce((a, c) => {\n      return a + c.length;\n    }, 0);\n\n    const result = new Uint8Array(totalLen);\n\n    arrays.reduce((a, c) => {\n      result.set(c, a);\n      return a + c.length;\n    }, 0);\n\n    return result;\n  }\n}", "import { SerialRawValue } from \"./SerialRawValue\";\nimport { SerialUtil } from \"./SerialUtil\";\n\nconst EXPECTED_ARRAY_SIZE = 26;\n\nexport class SerialReader {\n  private _array: Uint8Array;\n  private readonly _reader: ReadableStreamDefaultReader;\n\n  constructor(reader: ReadableStreamDefaultReader) {\n    this._reader = reader;\n    this._array = new Uint8Array();\n  }\n\n  _log(...msg: any) {\n    console.log('|SerialReader|', ...msg);\n  }\n\n  _err(...msg: any) {\n    console.error('|SerialReader|', ...msg);\n  }\n\n  private async _read(): Promise<SerialRawValue> {\n\n    //If we have enough in the array use that don't read...\n    if (this._array.length >= EXPECTED_ARRAY_SIZE) {\n      const spliced = this._array.subarray(0, EXPECTED_ARRAY_SIZE);\n      this._array = this._array.subarray(EXPECTED_ARRAY_SIZE);\n      //this._log('reading from array..', this._array.length, spliced.length);\n\n      return new SerialRawValue(spliced);\n    }\n\n    if (!this._reader) {\n      this._err('readLoop - no reader. returning');\n      throw new Error('no reader');\n    }\n\n    //read data from reader\n    const readInstance = await this._reader.read();\n    const { value, done } = readInstance;\n\n    if (done) {\n      //this._log(\"[readOnce] DONE\", done);\n      throw new Error('reader done');\n    }\n\n    //this._log('reading length', value.length);\n\n    // if match expectation, clear buffer and return..\n    if (value.length === EXPECTED_ARRAY_SIZE) {\n      //this._log('array length matched. clearing temp array..');\n      this._array = new Uint8Array();\n      return new SerialRawValue(value.subarray(0));\n    }\n\n    //otherwise, append to array\n    this._array = SerialUtil.concatArray(this._array, value);\n    //this._log('added to array. length:', this._array.length);\n\n    //then read again (recursive)\n    return await this.readOnce();\n  }\n\n\n  async readMultiple(numberToRead: number = 10): Promise<SerialRawValue[]> {\n    const array: SerialRawValue[] = [];\n    while (array.length < numberToRead) {\n      // this._log('reading..')\n      const value = await this._read();\n      array.push(value);\n    }\n\n    return array;\n  }\n\n\n  async readOnce(): Promise<SerialRawValue> {\n    const value = await this._read();\n\n    if (value) {\n      // this._log('readOnce', value.header2Bytes, value.footer2Bytes, value.rawValue.length, value.sensorTypeRaw);\n    }\n    return value;\n  }\n\n}\n", "import { SensorReadResult } from \"../data/SensorReadResult\";\nimport { SerialRawValue } from \"./SerialRawValue\";\n\n\nexport abstract class SerialDecoder {\n\n    constructor() {\n    }\n\n    _log(...msg: any) {\n        console.log('|SerialDecoder|', ...msg);\n    }\n    _err(...msg: any) {\n        console.error(\"|SerialDecoder|\", ...msg);\n    }\n\n    abstract decode(rawValue: SerialRawValue[]): Promise<SensorReadResult | null>;\n}\n\n", "import { SensorDecodedValue } from \"../data/SensorDecodedValue\";\nimport { SensorReadResult } from \"../data/SensorReadResult\";\nimport { SerialDecoder } from \"../service/SerialDecoder\";\nimport { SENSOR_VALUE, SerialRawValue } from \"../service/SerialRawValue\";\nimport { SerialNumberValue } from \"../service/SerialHexValue\";\n\nexport class HumiditySerialDecoder extends SerialDecoder {\n\n  constructor() {\n    super();\n  }\n\n  _log(...msg: any) {\n    console.log('|HumiditySerialDecoder|', ...msg);\n  }\n\n  async decode(rawValues: SerialRawValue[]): Promise<SensorReadResult | null> {\n    if (!rawValues.length) {\n      throw new Error('invlalid input. expected 1 value at least')\n    }\n\n    const rawValue = rawValues[0];\n\n    if (!rawValue.isValidLength) {\n      this._log(`invalid length ${rawValue.rawValue.length}. skipping..`);\n      return null;\n    }\n\n    const data0f = new SerialNumberValue(rawValue.getTwoBytesSignedByIndex(6)).divideByHundred();\n    const data1f = new SerialNumberValue(rawValue.getTwoBytesSignedByIndex(8)).divideByHundred();\n\n\n    const value0: SensorDecodedValue = { label: SENSOR_VALUE.TEMPERATURE, value: data0f, type: \"number\" };\n    const value1: SensorDecodedValue = { label: SENSOR_VALUE.HUMIDITY, value: data1f, type: \"number\" };\n\n    const result: SensorReadResult = {\n      sensorType: rawValue.sensorType,\n      decodedValues: [value0, value1]\n    };\n\n    return result;\n  }\n}\n", "import { SensorDecodedValue } from \"../data/SensorDecodedValue\";\nimport { SensorReadResult } from \"../data/SensorReadResult\";\nimport { SerialDecoder } from \"../service/SerialDecoder\";\nimport { SENSOR_VALUE, SerialRawValue } from \"../service/SerialRawValue\";\n\nexport class UVSerialDecoder extends SerialDecoder {\n\n    constructor() {\n        super();\n    }\n\n    _log(...msg: any) {\n        console.log('|UVSerialDecoder|', ...msg);\n    }\n\n    async decode(rawValues: SerialRawValue[]): Promise<SensorReadResult | null> {\n        if (!rawValues.length) {\n            throw new Error('invlalid input. expected 1 value at least')\n        }\n\n        const rawValue = rawValues[0];\n\n        const data0f = rawValue.getFourBytesFloatByIndex(6).toFixed(0);\n        const data1f = rawValue.getFourBytesFloatByIndex(10).toFixed(1);\n\n\n        const value0: SensorDecodedValue = { label: SENSOR_VALUE.LUX, value: data0f, type: \"number\" };\n        const value1: SensorDecodedValue = { label: SENSOR_VALUE.UV_INDEX, value: data1f, type: \"number\" };\n\n        const result: SensorReadResult = {\n            sensorType: rawValue.sensorType,\n            decodedValues: [value0, value1]\n        };\n\n        return result;\n    }\n}\n", "import { SensorDecodedValue } from \"../data/SensorDecodedValue\";\nimport { SensorReadResult } from \"../data/SensorReadResult\";\nimport { SerialDecoder } from \"../service/SerialDecoder\";\nimport { SENSOR_VALUE, SerialRawValue } from \"../service/SerialRawValue\";\n\n// Use number type for browser setTimeout return value\ntype Timeout = number;\n\nconst MAX_MS_WAIT_FOR_DATA_READY: number = 20000;\nconst INTERVAL_MS = 1000;\nconst MAX_PERCENTAGE = 100;\n\nexport class VOCSerialDecoder extends SerialDecoder {\n\n  private _hasStartedWaitingForData: boolean = false;\n  private _dataReadyPercentage: number = 0;\n  private _dataReadyIntervalId: Timeout | undefined;\n  private _incrementPercentage: number;\n\n  constructor() {\n    super();\n\n    this._incrementPercentage = INTERVAL_MS * MAX_PERCENTAGE / MAX_MS_WAIT_FOR_DATA_READY;\n  }\n\n  async decode(rawValues: SerialRawValue[]): Promise<SensorReadResult | null> {\n    if (!rawValues.length) {\n      throw new Error('invlalid input. expected 1 value at least')\n    }\n\n    const rawValue = rawValues[0];\n\n    if (!rawValue.isValidLength) {\n      this._log(`invalid length ${rawValue.rawValue.length}. skipping..`);\n      return null;\n    }\n\n    if (!this._hasStartedWaitingForData) {\n      this.startIntervalForDataReady();\n    }\n\n    const data0f = rawValue.getTwoBytesByIndex(6);\n\n    if (data0f > 0) {\n      this.clearIntervalIfRunning();\n    }\n\n    const data: VocResult = {\n      status: this._dataReadyPercentage !== MAX_PERCENTAGE ? VOC_RESULT_STATUS.PROCESSING : VOC_RESULT_STATUS.READY,\n      dataReadyPercentage: this._dataReadyPercentage,\n      value: data0f\n    }\n\n    const value0: SensorDecodedValue = { label: SENSOR_VALUE.VOC, value: data, type: \"object\" };\n\n    const result: SensorReadResult = {\n      sensorType: rawValue.sensorType,\n      decodedValues: [value0]\n    };\n\n    return result;\n  }\n\n  private clearIntervalIfRunning() {\n    if (!this._dataReadyIntervalId) {\n      return;\n    }\n\n    this._log('clearIntervalIfRunning');\n    clearInterval(this._dataReadyIntervalId);\n    this._dataReadyIntervalId = undefined;\n    this._dataReadyPercentage = MAX_PERCENTAGE;\n  }\n\n  private startIntervalForDataReady() {\n    this._log('start interval for data ready..');\n\n\n    this.runOneInterval();\n    this._dataReadyIntervalId = setInterval(() => {\n      this.runOneInterval();\n    }, INTERVAL_MS);\n\n    this._hasStartedWaitingForData = true;\n  }\n\n  private runOneInterval() {\n\n    if (this._dataReadyPercentage >= MAX_PERCENTAGE) {\n      this.clearIntervalIfRunning();\n      return;\n    }\n\n    this._dataReadyPercentage += this._incrementPercentage;\n  }\n\n}\n\nexport const VOC_RESULT_STATUS = {\n  PROCESSING: 'PROCESSING',\n  READY: 'READY',\n};\n\nexport interface VocResult {\n  dataReadyPercentage: number;\n  status: string; //VOC_RESULT_STATUS\n  value?: number;\n}\n", "import { SensorDecodedValue } from \"../data/SensorDecodedValue\";\nimport { SensorReadResult } from \"../data/SensorReadResult\";\nimport { SerialDecoder } from \"../service/SerialDecoder\";\nimport { SENSOR_VALUE, SerialRawValue } from \"../service/SerialRawValue\";\n\nexport const CONDUCTIVITY_RESULT_STATUS = {\n  MAX: 'MAX',\n  MIN: 'MIN',\n  READY: 'READY',\n};\n\nexport interface ConductivityResult {\n  status: string;\n  value: number | string;\n}\n\nconst MAX_CONDUCTANCE_VALUE = 200000;\nconst MIN_CONDUCTANCE_VALUE = 65535;\n\nexport class ConductivitySerialDecoder extends SerialDecoder {\n\n  constructor() {\n    super();\n  }\n\n  _log(...msg: any) {\n    console.log('|ConductivitySerialDecoder|', ...msg);\n  }\n\n  async decode(rawValues: SerialRawValue[]): Promise<SensorReadResult | null> {\n    if (!rawValues.length) {\n      throw new Error('invlalid input. expected 1 value at least')\n    }\n\n    const rawValue = rawValues[0];\n\n    if (!rawValue.isValidLength) {\n      this._log(`invalid length ${rawValue.rawValue.length}. skipping..`);\n      return null;\n    }\n\n    const data0f = rawValue.getTwoBytesByIndex(6);\n    const data1f = rawValue.getTwoBytesByIndex(8);\n\n    const conductivity = ConductivitySerialDecoder.calculateConductivity(data0f, data1f);\n\n\n\n    const value0: SensorDecodedValue = { label: SENSOR_VALUE.CONDUCTIVITY, value: conductivity, type: \"object\" };\n\n    const result: SensorReadResult = {\n      sensorType: rawValue.sensorType,\n      decodedValues: [value0]\n    };\n\n    return result;\n  }\n\n  private static calculateConductivity(data0: number, data1: number): ConductivityResult {\n    //Conductivity sensor returns -1 to indicate near-infinity (When nothing is connected)\n    if (data0 >= MIN_CONDUCTANCE_VALUE) {\n      const result: ConductivityResult = {\n        value: 0,\n        status: CONDUCTIVITY_RESULT_STATUS.MIN\n      };\n\n      return result;\n    }\n\n    const conductivity = Number(((1 / (data0 * data1)) * Math.pow(10, 6)).toFixed(1));\n\n    if (conductivity > MAX_CONDUCTANCE_VALUE) {\n      const result: ConductivityResult = {\n        value: 'MAX',\n        status: CONDUCTIVITY_RESULT_STATUS.MAX\n      };\n      return result;\n    }\n\n    const result: ConductivityResult = {\n      value: conductivity,\n      status: CONDUCTIVITY_RESULT_STATUS.READY\n    };\n    return result;\n  }\n}\n", "import fft from 'jsfft';\n\nconst MIN_INPUT_VALUE = 300000;\nconst MAX_INPUT_VALUE = 900000;\nconst SAMPLE_RATE = 200;\n\nconst INPUT_ARRAY_SIZE = 2048;\nconst RESULT_ARRAY_SIZE = 100;\n\nconst SOS = [\n    [[1.0000, 0, -1.0000], [1.0000, -1.9794, 0.9847]],\n    [[1.0000, 0, -1.0000], [1.0000, -1.9948, 0.9953]],\n    [[1.0000, 0, -1.0000], [1.0000, -1.9537, 0.9583]],\n    [[1.0000, 0, -1.0000], [1.0000, -1.9849, 0.9855]],\n    [[1.0000, 0, -1.0000], [1.0000, -1.9730, 0.9737]],\n    [[1.0000, 0, -1.0000], [1.0000, -1.9392, 0.9426]],\n    [[1.0000, 0, -1.0000], [1.0000, -1.9571, 0.9583]],\n    [[1.0000, 0, -1.0000], [1.0000, -1.9410, 0.9432]]\n];\n\nconst GAIN = [0.0256, 0.0256, 0.0254, 0.0254, 0.0252, 0.0252, 0.0251, 0.0251, 1.0000];\n\nexport const HEART_RATE_RESULT_STATUS = {\n    TOO_LOW: 'TOO_LOW',\n    TOO_HIGH: 'TOO_HIGH',\n    PROCESSING: 'PROCESSING',\n    READY: 'READY',\n};\n\nexport interface HeartRateResult {\n    status: string;\n    value?: number;\n}\n\nclass FixedArray {\n    private _array: number[];\n    private _size: number;\n    private _sum: number;\n\n    constructor(size: number) {\n        this._size = size;\n        this._array = [];\n        this._sum = 0;\n    }\n\n    private _log(...msg: any) {\n        console.log('|FixedArray|', ...msg);\n    }\n\n    get isAverageReady(): boolean {\n        return this._array.length >= this._size;\n    }\n\n    get average(): number {\n        return FixedArray.calcAverage(this._sum, this._array.length);\n    }\n\n    get array(): number[] {\n        return this._array;\n    }\n\n    private _cleanup() {\n        while (this._array.length > this._size) {\n            const removed = this._array.shift();\n            if (removed) {\n                this._sum -= removed;\n            }\n        }\n    }\n\n    private _add(item: number) {\n        this._array.push(item);\n        this._sum += item;\n    }\n\n    add(item: number) {\n        this._add(item);\n        this._cleanup();\n    }\n\n    addItems(items: number[]) {\n        for (const i of items) {\n            this._add(i);\n        }\n\n        this._cleanup();\n    }\n\n    static calcSum(array: number[]) {\n        return array.reduce((item, curr) => item + curr, 0);\n    }\n\n    static calcAverage(sum: number, length: number) {\n        if (!length) {\n            return 0;\n        }\n\n        return sum / length;\n    }\n\n    static createSteppedArray(startValue: number, stopValue: number, cardinality: number) {\n        const arr = [];\n        const step = (stopValue - startValue) / (cardinality - 1);\n        for (let i = 0; i < cardinality; i++) {\n            arr.push(startValue + (step * i));\n        }\n\n        return arr;\n    }\n}\n\n// Biquad filter object\nclass Biquad {\n    b: number[];\n    a: number[];\n    g1: number;\n    g2: number;\n    w: number[];\n\n    // Biquad direct form II representation, g1 and g2 are input and output gains respectively\n    constructor(b: number[], a: number[], g1: number, g2: number) {\n        this.b = b;\n        this.a = a;\n        this.g1 = g1;\n        this.g2 = g2;\n        this.w = [1, 1, 1]\n    }\n\n    _log(...msg: any) {\n        console.log('|Biquad|', ...msg);\n    }\n\n    updateFilter(x: number) {\n        const xGained = x * this.g1;\n\n        this.w[2] = this.w[1];\n        this.w[1] = this.w[0];\n        this.w[0] = xGained - this.a[1] * this.w[1] - this.a[2] * this.w[2];\n\n        const y = this.b[0] * this.w[0] + this.b[1] * this.w[1] + this.b[2] * this.w[2];\n        const yGained = y * this.g2;\n\n        return yGained;\n    }\n}\n\nexport class HeartRateProcessor {\n    private _filters: any;\n    private _resultArray: FixedArray;\n    private _inputArray: FixedArray;\n    private _xf: number[];\n\n    constructor() {\n        this._log('ctor');\n\n        this._initFilters();\n\n        const halfSampleRate = Math.floor(SAMPLE_RATE / 2);\n\n        this._resultArray = new FixedArray(RESULT_ARRAY_SIZE);\n        this._inputArray = new FixedArray(INPUT_ARRAY_SIZE);\n\n        const L = INPUT_ARRAY_SIZE;\n        const halfL = Math.floor(L / 2);\n        this._xf = FixedArray.createSteppedArray(0, halfSampleRate, halfL);\n    }\n\n    private _log(...msg: any) {\n        console.log('|HeartRateProcessor|', ...msg);\n    }\n\n    private _initFilters() {\n        this._filters = SOS.map((s, i) => new Biquad(s[0], s[1], GAIN[i], 1));\n    }\n\n    getStatusForInput(input: number): string {\n        if (input < MIN_INPUT_VALUE) {\n            return HEART_RATE_RESULT_STATUS.TOO_LOW;\n        }\n        else if (input > MAX_INPUT_VALUE) {\n            return HEART_RATE_RESULT_STATUS.TOO_HIGH;\n        }\n\n        return HEART_RATE_RESULT_STATUS.PROCESSING;\n    }\n\n    processSingleInput(input: number): HeartRateResult {\n        const status = this.getStatusForInput(input);\n        if (status !== HEART_RATE_RESULT_STATUS.PROCESSING) {\n\n            const result: HeartRateResult = { status };\n            return result;\n        }\n\n        this._inputArray.add(input);\n        const output = this.process();\n\n        if (!output) {\n            const result: HeartRateResult = { status: HEART_RATE_RESULT_STATUS.PROCESSING };\n            return result;\n        }\n\n        const result: HeartRateResult = { status: HEART_RATE_RESULT_STATUS.READY, value: output };\n        return result;\n    }\n\n    processMultiInput(inputArray: number[]): HeartRateResult {\n        for (const input of inputArray) {\n            const status = this.getStatusForInput(input);\n            if (status !== HEART_RATE_RESULT_STATUS.PROCESSING) {\n\n                const result: HeartRateResult = { status };\n                return result;\n            }\n        }\n\n        this._inputArray.addItems(inputArray);\n        const output = this.process();\n\n        if (!output) {\n            const result: HeartRateResult = { status: HEART_RATE_RESULT_STATUS.PROCESSING };\n            return result;\n        }\n\n        const result: HeartRateResult = { status: HEART_RATE_RESULT_STATUS.READY, value: output };\n        return result;\n    }\n\n    process(): number | null {\n        if (!this._inputArray.isAverageReady) {\n            return null;\n        }\n\n        const heartRate = this._process(this._inputArray);\n        if (!heartRate) {\n            return null;\n        }\n\n        this._resultArray.add(heartRate);\n        if (!this._resultArray.isAverageReady) {\n            return null;\n        }\n\n        return this._resultArray.average;\n    }\n\n    private _process(inputArray: FixedArray): number {\n        if (!inputArray.isAverageReady) {\n            throw new Error(`average is not ready. arr len: ${inputArray.array.length}`)\n        }\n\n        const filtered = inputArray.array.map((value: any) => {\n            const adjustedV = value - inputArray.average;\n            return this._updateAllFilters(adjustedV);\n        });\n\n        const dataFFT = new fft.ComplexArray(filtered.length).map((value: any, i: any, n: any) => {\n            value.real = filtered[i];\n        });\n        const spectrum = dataFFT.FFT();\n        const mag = spectrum.magnitude();\n\n        let minVal = 0;\n        let minIndex = 0;\n\n        for (let index = 0; index < mag.length / 2; index++) {\n            const element = mag[index];\n\n            if (element > minVal) {\n                minVal = element;\n                minIndex = index;\n            }\n        }\n\n        const heartRate = this._xf[minIndex] * 60;\n        return heartRate;\n    }\n\n\n    private _updateAllFilters(input: number) {\n        let output;\n\n        let current = input;\n        for (let f of this._filters) {\n            output = f.updateFilter(current);\n            current = output;\n        }\n\n        return output;\n    }\n\n}\n", "import { SensorDecodedValue } from \"../data/SensorDecodedValue\";\nimport { SensorReadResult } from \"../data/SensorReadResult\";\nimport { HeartRateProcessor, HeartRateResult } from \"../processing/HeartRateProcessor\";\nimport { SerialDecoder } from \"../service/SerialDecoder\";\nimport { SENSOR_VALUE, SerialRawValue } from \"../service/SerialRawValue\";\n\nexport class SerialHeartRateDecoder extends SerialDecoder {\n    _processor: HeartRateProcessor;\n\n    constructor() {\n        super();\n\n        this._processor = new HeartRateProcessor();\n    }\n\n    _log(...msg: any) {\n        console.log('|SerialHeartRateDecoder|', ...msg);\n    }\n\n    async decode(rawValues: SerialRawValue[]): Promise<SensorReadResult | null> {\n        if (!rawValues.length) {\n            throw new Error('invlalid input. expected 1 value at least')\n        }\n\n        const rawValue = rawValues[0];\n\n        const data0 = rawValue.getFourBytesByIndex(6);\n        const data1 = rawValue.getFourBytesByIndex(10);\n        const data2 = rawValue.getFourBytesByIndex(14);\n        const data3 = rawValue.getFourBytesByIndex(18);\n\n        const heartRateResult: HeartRateResult = this._processor.processMultiInput([data0, data1, data2, data3]);\n\n        const value0: SensorDecodedValue = { label: SENSOR_VALUE.HEART_RATE, value: heartRateResult, type: \"object\" };\n\n        const result: SensorReadResult = {\n            sensorType: rawValue.sensorType,\n            decodedValues: [value0]\n        };\n\n        return result;\n    }\n}\n", "export class MinValueThreshold {\n    LOW_THRESHOLD: number = 1e5;\n    HIGH_THRESHOLD: number = 2e6;\n\n    _isAboveHigh: boolean = false;\n\n\n    check(value: number): boolean {\n\n        if (value > this.HIGH_THRESHOLD) {\n            this._isAboveHigh = true;\n\n            return true;\n        }\n\n        if (this._isAboveHigh) {\n            if (value > this.LOW_THRESHOLD) {\n                // still above low\n                return true;\n            }\n            else {\n                this._isAboveHigh = false;\n\n                return false;\n            }\n        }\n\n        // not reached high yet\n        return false;\n    }\n}", "import { SensorDecodedValue } from \"../data/SensorDecodedValue\";\nimport { SensorReadResult } from \"../data/SensorReadResult\";\nimport { HeartRateProcessor, HEART_RATE_RESULT_STATUS } from \"../processing/HeartRateProcessor\";\nimport { MinValueThreshold } from \"../processing/MinValueThreshold\";\nimport { SerialDecoder } from \"../service/SerialDecoder\";\nimport { SENSOR_VALUE, SerialRawValue } from \"../service/SerialRawValue\";\nimport { SerialUtil } from \"../service/SerialUtil\";\n\ndeclare const HeartRateDetector: any;\n\nexport class SerialHeartRate2Decoder extends SerialDecoder {\n    _processor: HeartRateProcessor;\n\n    _detector: any;\n\n    _thresholdChecker: MinValueThreshold = new MinValueThreshold();\n    _postProcessor: HeartRateValuePostProcessor = new HeartRateValuePostProcessor();\n\n    constructor() {\n        super();\n\n        this._processor = new HeartRateProcessor();\n\n        // Detector \n        this._detector = new HeartRateDetector();\n    }\n\n    _log(...msg: any) {\n        console.log('|SerialHeartRateDecoder|', ...msg);\n    }\n\n    async decode(array: SerialRawValue[]): Promise<SensorReadResult | null> {\n        // this._log('array', array);\n        // this._log('headers-footers', rawValue.header2Bytes, rawValue.footer2Bytes);\n\n        // check the first rawvalue if the sensor is being touched\n        const sliced = array[0].rawValue.slice(0, 26);\n        const rawValue = new SerialRawValue(sliced);\n        const data0 = rawValue.getFourBytesByIndex(6);\n        const isValid = this._thresholdChecker.check(data0);\n        this._log('rawValue', data0, isValid);\n\n        const value0: SensorDecodedValue = {\n            label: SENSOR_VALUE.HEART_RATE,\n            value: {\n                status: HEART_RATE_RESULT_STATUS.TOO_LOW,\n                value: 0\n            },\n            type: \"object\"\n        };\n        const result: SensorReadResult = {\n            sensorType: array[0].sensorType,\n            decodedValues: [value0]\n        };\n\n        const subArrays = array.map(i => i.rawValue.subarray(6, 22));\n        // this._log('subArrays', subArrays);\n\n        const rawData = SerialUtil.concatMultiArrays(subArrays);\n        // this._log('rawData', rawData);\n\n        if (isValid) {\n            const heartRateResult = await this._detector.detectHeartRate(rawData);\n            this._log('heartrate-result', heartRateResult);\n\n            const postProcessedResult = this._postProcessor.process(heartRateResult);\n\n            value0.value = postProcessedResult;\n        }\n\n\n        return result;\n    }\n}\n\nclass HeartRateValuePostProcessor {\n    _wasReady = false;\n\n    process(heartrateValue: any) {\n        // if the value is processing, but the previous one was \"READY\", consider this one ready to avoid temporary status change\n        if (heartrateValue.status === HEART_RATE_RESULT_STATUS.PROCESSING && this._wasReady) {\n            heartrateValue.status = HEART_RATE_RESULT_STATUS.READY;\n        }\n\n        this._wasReady = heartrateValue.status === HEART_RATE_RESULT_STATUS.READY;\n\n        return heartrateValue;\n    }\n}", "import { SensorDecodedValue } from \"../data/SensorDecodedValue\";\nimport { SensorReadResult } from \"../data/SensorReadResult\";\nimport { SerialDecoder } from \"../service/SerialDecoder\";\nimport { SENSOR_VALUE, SerialRawValue } from \"../service/SerialRawValue\";\nimport { SerialNumberValue } from \"../service/SerialHexValue\";\n\nexport class TemperatureSerialDecoder extends SerialDecoder {\n\n  constructor() {\n    super();\n  }\n\n  _log(...msg: any) {\n    console.log('|TemperatureSerialDecoder|', ...msg);\n  }\n\n  async decode(rawValues: SerialRawValue[]): Promise<SensorReadResult | null> {\n    if (!rawValues.length) {\n      throw new Error('invlalid input. expected 1 value at least')\n    }\n\n    const rawValue = rawValues[0];\n\n    if (!rawValue.isValidLength) {\n      this._log(`invalid length ${rawValue.rawValue.length}. skipping..`);\n      return null;\n    }\n\n    const data0f = new SerialNumberValue(rawValue.getTwoBytesSignedByIndex(6)).divideByHundred();\n    const data1f = new SerialNumberValue(rawValue.getTwoBytesSignedByIndex(8)).divideByHundred();\n\n\n    const value0: SensorDecodedValue = { label: SENSOR_VALUE.INFRARED_TEMPERATURE, value: data0f, type: \"number\" };\n    const value1: SensorDecodedValue = { label: SENSOR_VALUE.AMBIENT_TEMPERATURE, value: data1f, type: \"number\" };\n\n    const result: SensorReadResult = {\n      sensorType: rawValue.sensorType,\n      decodedValues: [value0, value1]\n    };\n\n    return result;\n  }\n}\n", "import { SensorDecodedValue } from \"../data/SensorDecodedValue\";\nimport { SensorReadResult } from \"../data/SensorReadResult\";\nimport { SerialDecoder } from \"../service/SerialDecoder\";\nimport { SENSOR_VALUE, SerialRawValue } from \"../service/SerialRawValue\";\nimport { SerialNumberValue } from \"../service/SerialHexValue\";\n\nexport class Temperature2SerialDecoder extends SerialDecoder {\n\n  constructor() {\n    super();\n  }\n\n  _log(...msg: any) {\n    console.log('|Temperature2SerialDecoder|', ...msg);\n  }\n\n  async decode(rawValues: SerialRawValue[]): Promise<SensorReadResult | null> {\n    if (!rawValues.length) {\n      throw new Error('invlalid input. expected 1 value at least')\n    }\n\n    const rawValue = rawValues[0];\n\n    if (!rawValue.isValidLength) {\n      this._log(`invalid length ${rawValue.rawValue.length}. skipping..`);\n      return null;\n    }\n\n    const data0f = new SerialNumberValue(rawValue.getTwoBytesSignedByIndex(6)).divideByHundred();\n\n    const X = new SerialNumberValue(rawValue.getTwoBytesUnsignedByIndex(8)).value;\n    const a = new SerialNumberValue(rawValue.getFourBytesFloatByIndex(10)).value;\n    const b = new SerialNumberValue(rawValue.getFourBytesFloatByIndex(14)).value;\n    const c = new SerialNumberValue(rawValue.getFourBytesFloatByIndex(18)).value;\n\n    const infrared_temp = ((a * Math.pow(X, 2)) / Math.pow(10, 5) + b * X + c).toFixed(0);\n\n\n    const value0: SensorDecodedValue = { label: SENSOR_VALUE.AMBIENT_TEMPERATURE, value: data0f, type: \"number\" };\n    const value1: SensorDecodedValue = { label: SENSOR_VALUE.INFRARED_TEMPERATURE, value: infrared_temp, type: \"number\" };\n\n    const result: SensorReadResult = {\n      sensorType: rawValue.sensorType,\n      decodedValues: [value0, value1]\n    };\n\n    return result;\n  }\n}\n", "import { SerialRawValue } from \"./SerialRawValue\";\nimport { SerialReader } from \"./SerialReader\";\n\n\nexport abstract class ValueReader {\n    abstract readValue(serialReader: SerialReader): Promise<SerialRawValue[]>;\n}\n\nexport class SingleValueReader {\n    async readValue(serialReader: SerialReader): Promise<SerialRawValue[]> {\n        const value = await serialReader.readOnce();\n        return [value];\n    }\n}\n\nexport class TenValuesReader {\n    async readValue(serialReader: SerialReader): Promise<SerialRawValue[]> {\n        const values = await serialReader.readMultiple(10);\n        return values;\n    }\n}", "import { SENSOR_TYPE } from \"./SerialRawValue\";\n\nimport { SerialDecoder } from \"./SerialDecoder\";\n\nimport { HumiditySerialDecoder } from \"../decoder/SerialHumidityDecoder\";\nimport { UVSerialDecoder } from \"../decoder/SerialUVDecoder\";\nimport { VOCSerialDecoder } from \"../decoder/SerialVOCDecoder\";\nimport { ConductivitySerialDecoder } from \"../decoder/SerialConductivityDecoder\";\nimport { SerialHeartRateDecoder } from \"../decoder/SerialHeartRateDecoder\";\nimport { SerialHeartRate2Decoder } from \"../decoder/SerialHeartRate2Decoder\";\nimport { TemperatureSerialDecoder } from \"../decoder/SerialTemperatureDecoder\";\nimport { Temperature2SerialDecoder } from \"../decoder/SerialTemperature2Decoder\";\nimport { SingleValueReader, TenValuesReader, ValueReader } from \"./ValueReader\";\n\nexport class SerialDecoderFactory {\n\n    static _log(...msg: any) {\n        console.log('|SerialDecoderFactory|', ...msg);\n    }\n    static _err(...msg: any) {\n        console.error(\"|SerialDecoderFactory|\", ...msg);\n    }\n\n    static createDecoder(type: string): SerialDecoder {\n        SerialDecoderFactory._log('createDecoder');\n        SerialDecoderFactory._log('type = ' + type);\n        switch (type) {\n            case SENSOR_TYPE.UV:\n            case SENSOR_TYPE.UV2:\n                return new UVSerialDecoder();\n            case SENSOR_TYPE.HUMIDITY: return new HumiditySerialDecoder();\n            case SENSOR_TYPE.HEART_RATE: return new SerialHeartRateDecoder();\n            case SENSOR_TYPE.HEART_RATE2: return new SerialHeartRate2Decoder();\n            case SENSOR_TYPE.VOC: return new VOCSerialDecoder();\n            case SENSOR_TYPE.CONDUCTIVITY: return new ConductivitySerialDecoder();\n            case SENSOR_TYPE.TEMPERATURE: return new TemperatureSerialDecoder();\n            case SENSOR_TYPE.TEMPERATURE2: return new Temperature2SerialDecoder();\n\n            case SENSOR_TYPE.HEART_RATE2: return new SerialHeartRate2Decoder();\n\n            default:\n                throw new Error(`invalid type ${type}`);\n        }\n    }\n\n    static createReader(type: string): ValueReader {\n        SerialDecoderFactory._log('createReader');\n\n        switch (type) {\n            case SENSOR_TYPE.UV:\n            case SENSOR_TYPE.UV2:\n            case SENSOR_TYPE.HUMIDITY:\n            case SENSOR_TYPE.HEART_RATE:\n            case SENSOR_TYPE.VOC:\n            case SENSOR_TYPE.CONDUCTIVITY:\n            case SENSOR_TYPE.TEMPERATURE:\n            case SENSOR_TYPE.TEMPERATURE2:\n                return new SingleValueReader();\n\n            case SENSOR_TYPE.HEART_RATE2:\n                return new TenValuesReader();\n\n            default:\n                throw new Error(`invalid type ${type}`);\n        }\n    }\n}\n\n", "import { SensorReadResult } from \"../data/SensorReadResult\";\nimport { SerialReader } from \"./SerialReader\";\nimport { SerialDecoderFactory } from \"./SerialDecoderFactory\";\n\nclass SerialService {\n    public onSerialData?: (data: SensorReadResult) => void;\n    public onSerialConnection?: (connect: boolean) => void;\n    public onFirmwareUpdateAvailable?: (outdated: boolean) => void;\n\n    private _isConnected: boolean = false;\n    private _isReading: boolean = false;\n    private _port: any;  //TODO: TYPE\n    private _reader: any;\n\n    constructor() {\n        this._log('ctor');\n    }\n\n    private _log(...msg: any) {\n        console.log('|SerialService|', ...msg);\n    }\n    private _err(...msg: any) {\n        console.error(\"|SerialService|\", ...msg);\n    }\n    private _warn(...msg: any) {\n        console.warn(\"|SerialService|\", ...msg);\n    }\n\n    public get isReading(): boolean {\n        return this._isReading;\n    }\n\n    public get canResumeReading(): boolean {\n        // if the port is not null then we probably can resume\n        return !!this._port;\n    }\n\n    public triggerStopReading() {\n        // This will cause to exit the reading loop gracefuly\n        this._isReading = false;\n    }\n\n    private closeReader() {\n        this._log('closing reader..');\n        if (!this._reader) {\n            this._log('no reader found. exiting..');\n            return;\n        }\n\n        this.triggerStopReading();\n\n        this._log('cancelling..');\n        this._reader.cancel();\n\n        this._log('releasing lock..');\n        this._reader.releaseLock();\n\n        this._reader = null;\n        this._log('reader closed');\n    }\n\n    private async closePortAsync() {\n        this._log('closing port..');\n        if (!this._port) {\n            this._log('no port found. exiting..');\n            return;\n        }\n\n        this._isConnected = false;\n\n        try {\n            await this._port.close();\n            this._log('port closed');\n        }\n        catch (e) {\n            this._err('failed to close port', e);\n        }\n        // DO NOT UNCOMMECNT THE NEXT LINE. We keep a reference to the port so we can reuse it later\n        // this.port = null;\n\n\n        if (this.onSerialConnection) {\n            this.onSerialConnection(this._isConnected);\n        }\n\n    }\n\n    public async resumeReading() {\n        this._log('resume reading..');\n\n        if (!this._port) {\n            this._log('port not found, restarting..');\n            await this.connectAndReadAsync();\n\n            return;\n        }\n\n        return await this.startStage2ConnectPortAsync(this._port);\n    }\n\n    public async disconnectAsync() {\n        this._log('disconnecting..');\n\n        this.triggerStopReading();\n\n        setTimeout(async () => {\n            await this.stopStage2ClosePortAsync();\n        }, 0);\n    }\n\n    public async connectAndReadAsync() {\n        this._log('connect and read..');\n        const port = await this.startStage1RequestPortAsync();\n        if (!port) {\n            this._err('unable to request port');\n            return;\n        }\n\n        return await this.startStage2ConnectPortAsync(port);\n    }\n\n\n    private async startStage1RequestPortAsync() {\n        const { serial } = navigator as any;\n\n        if (!serial) {\n            alert(\"This feature only works on Chrome with 'Experimental Web Platform features' enabled\");\n            return null;\n        }\n\n        serial.onconnect = () => {\n            this._log('serial connect');\n        };\n        serial.ondisconnect = async () => {\n            this._log('serial disconnect');\n\n            await this.disconnectAsync();\n\n            this._port = null;\n        };\n\n\n        this._log('requesting port..');\n        const port = await serial\n            .requestPort({\n                filters: [{ usbVendorId: 0x04d8, vendorId: 0x04d8 }, { usbVendorId: 0x0d28, usbProductId: 0x0204 }],\n            })\n            .catch((e: Error) => {\n                this._err(`failed to serial.requestPort`, e);\n            });\n\n        if (!port) {\n            this._err(\"unable to find port value\");\n            return null;\n        }\n\n        return port;\n    }\n\n    private async startStage2ConnectPortAsync(port: any) {\n        this._log('startStage2ReadingAsync');\n\n        const connection = await this.connectPortAsync(port);\n        if (!connection) {\n            this._err('failed to connect');\n            return\n        }\n\n        this._isConnected = true;\n        this._port = connection.port;\n        this._reader = connection.reader;\n\n        if (this.onSerialConnection) {\n            this.onSerialConnection(this._isConnected);\n        }\n\n        this.startReading();\n    }\n\n    private async stopStage2ClosePortAsync() {\n        this._log('stopStage2ClosePortAsync');\n        this.closeReader();\n        await this.closePortAsync();\n    }\n\n    //TODO: PORT ANY\n    private async connectPortAsync(port: any) {\n        const portInfo = port.getInfo();\n        this._log('port info', portInfo);\n\n        if (port.readable) {\n            this._err(\"port is already readable\");\n            return null;\n        }\n\n        this._log('openning port..');\n        await port\n            .open({ baudrate: 230400, baudRate: 230400 })\n            .catch((e: Error) => {\n                this._err(`failed to port.open`, e);\n            });\n\n        if (!port.readable) {\n            this._err(`port is not readable..`);\n            return null;\n        }\n\n        const reader = port.readable.getReader();\n        if (reader.locked) {\n            this._err(\"reader is locked\");\n            return null;\n        }\n\n        return { port, reader };\n    }\n\n    private async startReading() {\n        try {\n            this._log('starting reader..');\n            const serialReader = new SerialReader(this._reader);\n\n            this._log('creating decoder..');\n            const serialValueForDecoder = await serialReader.readOnce();\n\n            if (this.onFirmwareUpdateAvailable) {\n                this.onFirmwareUpdateAvailable(serialValueForDecoder.isFirmwareOutdated);\n                this._warn(`New firmware available ? ${serialValueForDecoder.isFirmwareOutdated}`);\n            }\n\n            const decoderType = serialValueForDecoder.decoderType;\n            const sensorType = serialValueForDecoder.sensorType;\n\n            const valueReader = SerialDecoderFactory.createReader(decoderType);\n            const decoder = SerialDecoderFactory.createDecoder(decoderType);\n\n            this._log('starting loop..');\n            this._isReading = true;\n\n            while (this._isReading) {\n                const serialValues = await valueReader.readValue(serialReader);\n                const decodedValues = await decoder.decode(serialValues);\n\n                if (decodedValues) {\n                    if (sensorType !== decodedValues.sensorType) {\n                        this._err(`invalid sensor type. expecting ${sensorType}, but got ${decodedValues.sensorType}.`);\n                        continue;\n                    }\n\n                    if (this.onSerialData) {\n                        this.onSerialData(decodedValues);\n                    }\n                }\n            }\n\n            this._log('loop complete..');\n        }\n        catch (e) {\n            this._err('error reading loop startReading', e);\n        }\n        finally {\n            this.stopStage2ClosePortAsync();\n            this._log('startReading complete');\n        }\n    }\n}\n\nconst singletonInstance = new SerialService();\n\nexport default singletonInstance;\n", "// Kiwrious WebSerial SDK - ESM Entry Point\n// Main API exports\n\nimport SerialService from './service/SerialService.js';\n\n// Export data types\nexport { SensorDecodedValue } from './data/SensorDecodedValue.js';\nexport { SensorReadResult } from './data/SensorReadResult.js';\n\n// Export the main service as default\nexport default SerialService;\n\n// Also export as named export for flexibility\nexport { SerialService };\n"],
  "mappings": "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",
  "names": ["ComplexArray", "ComplexArray", "FFT", "fft", "InvFFT", "frequencyMap", "result", "result", "fft"]
}
