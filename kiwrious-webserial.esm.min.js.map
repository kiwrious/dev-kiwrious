{
  "version": 3,
  "sources": ["../node_modules/jsfft/dist/complex_array.js", "../node_modules/jsfft/dist/fft.js", "../src/service/SerialHexValue.ts", "../src/service/SerialRawValue.ts", "../src/service/SerialUtil.ts", "../src/service/SerialReader.ts", "../src/service/SerialDecoder.ts", "../src/decoder/SerialHumidityDecoder.ts", "../src/decoder/SerialUVDecoder.ts", "../src/decoder/SerialVOCDecoder.ts", "../src/decoder/SerialConductivityDecoder.ts", "../src/processing/HeartRateProcessor.ts", "../src/decoder/SerialHeartRateDecoder.ts", "../src/processing/MinValueThreshold.ts", "../src/decoder/SerialHeartRate2Decoder.ts", "../src/decoder/SerialTemperatureDecoder.ts", "../src/decoder/SerialTemperature2Decoder.ts", "../src/service/ValueReader.ts", "../src/service/SerialDecoderFactory.ts", "../src/service/SerialService.ts", "../src/index.ts"],
  "sourcesContent": ["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ComplexArray = function () {\n  function ComplexArray(other) {\n    var arrayType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Float32Array;\n\n    _classCallCheck(this, ComplexArray);\n\n    if (other instanceof ComplexArray) {\n      // Copy constuctor.\n      this.ArrayType = other.ArrayType;\n      this.real = new this.ArrayType(other.real);\n      this.imag = new this.ArrayType(other.imag);\n    } else {\n      this.ArrayType = arrayType;\n      // other can be either an array or a number.\n      this.real = new this.ArrayType(other);\n      this.imag = new this.ArrayType(this.real.length);\n    }\n\n    this.length = this.real.length;\n  }\n\n  _createClass(ComplexArray, [{\n    key: 'toString',\n    value: function toString() {\n      var components = [];\n\n      this.forEach(function (value, i) {\n        components.push('(' + value.real.toFixed(2) + ', ' + value.imag.toFixed(2) + ')');\n      });\n\n      return '[' + components.join(', ') + ']';\n    }\n  }, {\n    key: 'forEach',\n    value: function forEach(iterator) {\n      var n = this.length;\n      // For gc efficiency, re-use a single object in the iterator.\n      var value = Object.seal(Object.defineProperties({}, {\n        real: { writable: true }, imag: { writable: true }\n      }));\n\n      for (var i = 0; i < n; i++) {\n        value.real = this.real[i];\n        value.imag = this.imag[i];\n        iterator(value, i, n);\n      }\n    }\n\n    // In-place mapper.\n\n  }, {\n    key: 'map',\n    value: function map(mapper) {\n      var _this = this;\n\n      this.forEach(function (value, i, n) {\n        mapper(value, i, n);\n        _this.real[i] = value.real;\n        _this.imag[i] = value.imag;\n      });\n\n      return this;\n    }\n  }, {\n    key: 'conjugate',\n    value: function conjugate() {\n      return new ComplexArray(this).map(function (value) {\n        value.imag *= -1;\n      });\n    }\n  }, {\n    key: 'magnitude',\n    value: function magnitude() {\n      var mags = new this.ArrayType(this.length);\n\n      this.forEach(function (value, i) {\n        mags[i] = Math.sqrt(value.real * value.real + value.imag * value.imag);\n      });\n\n      return mags;\n    }\n  }]);\n\n  return ComplexArray;\n}();\n\nexports.default = ComplexArray;", "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ComplexArray = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.FFT = FFT;\nexports.InvFFT = InvFFT;\nexports.frequencyMap = frequencyMap;\n\nvar _complex_array = require('./complex_array');\n\nvar _complex_array2 = _interopRequireDefault(_complex_array);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// Math constants and functions we need.\nvar PI = Math.PI;\nvar SQRT1_2 = Math.SQRT1_2;\n\nfunction FFT(input) {\n  return ensureComplexArray(input).FFT();\n};\n\nfunction InvFFT(input) {\n  return ensureComplexArray(input).InvFFT();\n};\n\nfunction frequencyMap(input, filterer) {\n  return ensureComplexArray(input).frequencyMap(filterer);\n};\n\nvar ComplexArray = exports.ComplexArray = function (_baseComplexArray) {\n  _inherits(ComplexArray, _baseComplexArray);\n\n  function ComplexArray() {\n    _classCallCheck(this, ComplexArray);\n\n    return _possibleConstructorReturn(this, (ComplexArray.__proto__ || Object.getPrototypeOf(ComplexArray)).apply(this, arguments));\n  }\n\n  _createClass(ComplexArray, [{\n    key: 'FFT',\n    value: function FFT() {\n      return fft(this, false);\n    }\n  }, {\n    key: 'InvFFT',\n    value: function InvFFT() {\n      return fft(this, true);\n    }\n\n    // Applies a frequency-space filter to input, and returns the real-space\n    // filtered input.\n    // filterer accepts freq, i, n and modifies freq.real and freq.imag.\n\n  }, {\n    key: 'frequencyMap',\n    value: function frequencyMap(filterer) {\n      return this.FFT().map(filterer).InvFFT();\n    }\n  }]);\n\n  return ComplexArray;\n}(_complex_array2.default);\n\nfunction ensureComplexArray(input) {\n  return input instanceof ComplexArray && input || new ComplexArray(input);\n}\n\nfunction fft(input, inverse) {\n  var n = input.length;\n\n  if (n & n - 1) {\n    return FFT_Recursive(input, inverse);\n  } else {\n    return FFT_2_Iterative(input, inverse);\n  }\n}\n\nfunction FFT_Recursive(input, inverse) {\n  var n = input.length;\n\n  if (n === 1) {\n    return input;\n  }\n\n  var output = new ComplexArray(n, input.ArrayType);\n\n  // Use the lowest odd factor, so we are able to use FFT_2_Iterative in the\n  // recursive transforms optimally.\n  var p = LowestOddFactor(n);\n  var m = n / p;\n  var normalisation = 1 / Math.sqrt(p);\n  var recursive_result = new ComplexArray(m, input.ArrayType);\n\n  // Loops go like O(n \u03A3 p_i), where p_i are the prime factors of n.\n  // for a power of a prime, p, this reduces to O(n p log_p n)\n  for (var j = 0; j < p; j++) {\n    for (var i = 0; i < m; i++) {\n      recursive_result.real[i] = input.real[i * p + j];\n      recursive_result.imag[i] = input.imag[i * p + j];\n    }\n    // Don't go deeper unless necessary to save allocs.\n    if (m > 1) {\n      recursive_result = fft(recursive_result, inverse);\n    }\n\n    var del_f_r = Math.cos(2 * PI * j / n);\n    var del_f_i = (inverse ? -1 : 1) * Math.sin(2 * PI * j / n);\n    var f_r = 1;\n    var f_i = 0;\n\n    for (var _i = 0; _i < n; _i++) {\n      var _real = recursive_result.real[_i % m];\n      var _imag = recursive_result.imag[_i % m];\n\n      output.real[_i] += f_r * _real - f_i * _imag;\n      output.imag[_i] += f_r * _imag + f_i * _real;\n\n      var _ref = [f_r * del_f_r - f_i * del_f_i, f_i = f_r * del_f_i + f_i * del_f_r];\n      f_r = _ref[0];\n      f_i = _ref[1];\n    }\n  }\n\n  // Copy back to input to match FFT_2_Iterative in-placeness\n  // TODO: faster way of making this in-place?\n  for (var _i2 = 0; _i2 < n; _i2++) {\n    input.real[_i2] = normalisation * output.real[_i2];\n    input.imag[_i2] = normalisation * output.imag[_i2];\n  }\n\n  return input;\n}\n\nfunction FFT_2_Iterative(input, inverse) {\n  var n = input.length;\n\n  var output = BitReverseComplexArray(input);\n  var output_r = output.real;\n  var output_i = output.imag;\n  // Loops go like O(n log n):\n  //   width ~ log n; i,j ~ n\n  var width = 1;\n  while (width < n) {\n    var del_f_r = Math.cos(PI / width);\n    var del_f_i = (inverse ? -1 : 1) * Math.sin(PI / width);\n    for (var i = 0; i < n / (2 * width); i++) {\n      var f_r = 1;\n      var f_i = 0;\n      for (var j = 0; j < width; j++) {\n        var l_index = 2 * i * width + j;\n        var r_index = l_index + width;\n\n        var left_r = output_r[l_index];\n        var left_i = output_i[l_index];\n        var right_r = f_r * output_r[r_index] - f_i * output_i[r_index];\n        var right_i = f_i * output_r[r_index] + f_r * output_i[r_index];\n\n        output_r[l_index] = SQRT1_2 * (left_r + right_r);\n        output_i[l_index] = SQRT1_2 * (left_i + right_i);\n        output_r[r_index] = SQRT1_2 * (left_r - right_r);\n        output_i[r_index] = SQRT1_2 * (left_i - right_i);\n\n        var _ref2 = [f_r * del_f_r - f_i * del_f_i, f_r * del_f_i + f_i * del_f_r];\n        f_r = _ref2[0];\n        f_i = _ref2[1];\n      }\n    }\n    width <<= 1;\n  }\n\n  return output;\n}\n\nfunction BitReverseIndex(index, n) {\n  var bitreversed_index = 0;\n\n  while (n > 1) {\n    bitreversed_index <<= 1;\n    bitreversed_index += index & 1;\n    index >>= 1;\n    n >>= 1;\n  }\n  return bitreversed_index;\n}\n\nfunction BitReverseComplexArray(array) {\n  var n = array.length;\n  var flips = new Set();\n\n  for (var i = 0; i < n; i++) {\n    var r_i = BitReverseIndex(i, n);\n\n    if (flips.has(i)) continue;\n\n    var _ref3 = [array.real[r_i], array.real[i]];\n    array.real[i] = _ref3[0];\n    array.real[r_i] = _ref3[1];\n    var _ref4 = [array.imag[r_i], array.imag[i]];\n    array.imag[i] = _ref4[0];\n    array.imag[r_i] = _ref4[1];\n\n\n    flips.add(r_i);\n  }\n\n  return array;\n}\n\nfunction LowestOddFactor(n) {\n  var sqrt_n = Math.sqrt(n);\n  var factor = 3;\n\n  while (factor <= sqrt_n) {\n    if (n % factor === 0) return factor;\n    factor += 2;\n  }\n  return n;\n}", "\nexport class SerialHexValue {\n  rawHexValue: string;\n\n  constructor(rawHexValue: string) {\n    this.rawHexValue = rawHexValue;\n  }\n\n  toFloat(): number {\n    const raw = Number(this.rawHexValue);\n\n    const s = raw & 0x80000000 ? -1 : 1;\n    const e = ((raw >> 23) & 0xff) - 127;\n    const c = 1 + (raw & 0x7fffff) / 0x7fffff;\n    return s * c * Math.pow(2, e);\n  }\n\n  toInt(): number {\n    return Number((parseInt(this.rawHexValue)).toFixed());\n  }\n\n  divideByHundred(): number {\n    return Number((parseInt(this.rawHexValue) / 100).toFixed());\n  }\n}\n\nexport class SerialNumberValue {\n  private readonly _raw: number;\n\n  constructor(value: number) {\n    this._raw = value;\n  }\n\n  get value() {\n    return this._raw;\n  }\n\n  toInt(): number {\n    return Number(this._raw.toFixed());\n  }\n\n  divideByHundred(): number {\n    return Number((this._raw / 100).toFixed());\n  }\n}\n", "import { SerialHexValue } from \"./SerialHexValue\";\n\nexport const SENSOR_TYPE = {\n    UNKNOWN: 'UNKNOWN',\n    UV: 'UV',\n    UV2: 'UV2',\n    HUMIDITY: 'HUMIDITY',\n    VOC: 'VOC',\n    CONDUCTIVITY: 'CONDUCTIVITY',\n    HEART_RATE: 'HEART_RATE',\n    HEART_RATE2: 'HEART_RATE2',\n    TEMPERATURE: 'TEMPERATURE',\n    TEMPERATURE2: 'TEMPERATURE2',\n    // TODO: other sensor types\n};\n\nexport const SENSOR_VALUE = {\n    UNKNOWN: 'UNKNOWN',\n    UV_INDEX: 'Uv',\n    LUX: 'Lux',\n    HUMIDITY: 'Hum',\n    TEMPERATURE: 'Temp',\n    VOC: 'Voc',\n    CONDUCTIVITY: 'Con',\n    HEART_RATE: 'HeartRate',\n    INFRARED_TEMPERATURE: 'InfraredTemp',\n    AMBIENT_TEMPERATURE: 'AmbientTemp',\n}\n\n// sensor version = undefined indicates sensor is having the initial firmware\nexport const LATEST_SENSOR_VERSION = new Map([\n    ['UV', 2],\n    ['HUMIDITY', undefined],\n    ['VOC', undefined],\n    ['CONDUCTIVITY', undefined],\n    ['HEART_RATE', 2],\n    ['TEMPERATURE', 2]\n]);\n\nexport class SerialRawValue {\n    rawValue: Uint8Array;\n    dataView: DataView;\n\n    constructor(rawValue: Uint8Array) {\n        this.rawValue = rawValue;\n        this.dataView = new DataView(rawValue.buffer);\n\n        if (!this.isValidLength) {\n            throw new Error(`invalid array length. expected [] but got [${rawValue.length}]`);\n        }\n    }\n\n    get isValidLength(): boolean {\n        return this.rawValue.length === 26;\n    }\n\n    get sensorTypeRaw(): number {\n        return this.rawValue[2];\n    }\n\n    get header2Bytes(): number {\n        return this.getTwoBytesByIndex(0);\n    }\n\n    get sequence2Bytes(): number {\n        return this.getTwoBytesByIndex(22);\n    }\n\n    get footer2Bytes(): number {\n        return this.getTwoBytesByIndex(24);\n    }\n\n    get decoderType(): string {\n        switch (this.sensorTypeRaw) {\n            case 1: return SENSOR_TYPE.UV;\n            case 2: return SENSOR_TYPE.TEMPERATURE;\n            case 4: return SENSOR_TYPE.CONDUCTIVITY;\n            case 5: return SENSOR_TYPE.HEART_RATE;\n            case 6: return SENSOR_TYPE.VOC;\n            case 7: return SENSOR_TYPE.HUMIDITY;\n            case 9: return SENSOR_TYPE.TEMPERATURE2;\n\n            // updated firmware sensor\n            case 10: return SENSOR_TYPE.HEART_RATE2;\n            case 11: return SENSOR_TYPE.UV2;\n            // TODO OTHER SENSORS\n\n            default:\n                throw new Error(`invalid sensor type ${this.sensorTypeRaw}`)\n        }\n    }\n\n    get isFirmwareOutdated(): boolean {\n        const regex = /\\d$/gm;\n        let currentSensorVersion = this.decoderType.match(regex)?.toString();\n        return currentSensorVersion != LATEST_SENSOR_VERSION.get(this.sensorType);\n    }\n\n    get sensorType(): string {\n        const regex = /\\d$/gm;\n        const sensorName = this.decoderType.replace(regex, '');\n        return sensorName;\n    }\n\n    // For humidity and temp sensor\n    getTwoBytesSignedByIndex(index: number): number {\n        const value = this.dataView.getInt16(index, true);\n\n        return value;\n    }\n\n    getTwoBytesUnsignedByIndex(index: number): number {\n        const value = this.dataView.getUint16(index, true);\n\n        return value;\n    }\n\n    getTwoBytesByIndex(index: number): number {\n        const value = this.dataView.getUint16(index, true);\n\n        return value;\n    }\n\n    getFourBytesByIndex(index: number): number {\n        const value = this.dataView.getUint32(index, true);\n        return value;\n    }\n\n    getFourBytesFloatByIndex(index: number): number {\n        const value = this.dataView.getFloat32(index, true);\n        return value;\n    }\n\n\n    sliceBytes(index: number, numberOfBytes: number): Uint8Array {\n        if (index + numberOfBytes > this.rawValue.length) {\n            throw new Error(`invalid index [${index}] for array length [${this.rawValue.length}]`);\n        }\n\n        const sliced = this.rawValue.slice(index, index + numberOfBytes);\n\n        return sliced;\n    }\n\n\n    getByteByIndex(index: number): number {\n        if (index >= this.rawValue.length) {\n            throw new Error(`invalid index [${index}] for array length [${this.rawValue.length}]`);\n        }\n\n        const value = this.rawValue[index];\n\n        return value;\n    }\n\n    getHexDigitByIndex(index: number): string {\n        if (index >= this.rawValue.length) {\n            throw new Error(`invalid index [${index}] for array length [${this.rawValue.length}]`);\n        }\n\n        const value16 = this.rawValue[index]\n            .toString(16)\n            .padStart(2, '0');\n\n        return value16;\n    }\n\n    // obsolete, use getTwoBytesByIndex() istead\n    // TODO: refactor to use getTwoBytesByIndex()\n    getHexString2(index0: number, index1: number): SerialHexValue {\n        const data0_a = this.getHexDigitByIndex(index0);\n        const data0_b = this.getHexDigitByIndex(index1);\n\n        const data0 = `0x${data0_a}${data0_b}`;\n        return new SerialHexValue(data0);\n    }\n\n    // obsolete, use getFourBytesByIndex() istead\n    // TODO: refactor to use getFourBytesByIndex()\n    getHexString4(index0: number, index1: number, index2: number, index3: number): SerialHexValue {\n        const data0_a = this.getHexDigitByIndex(index0);\n        const data0_b = this.getHexDigitByIndex(index1);\n        const data0_c = this.getHexDigitByIndex(index2);\n        const data0_d = this.getHexDigitByIndex(index3);\n\n        const data0 = `0x${data0_a}${data0_b}${data0_c}${data0_d}`;\n        return new SerialHexValue(data0);\n    }\n}\n\n", "export class SerialUtil {\n  static concatArray(a: Uint8Array, b: Uint8Array): Uint8Array {\n    const c = new Uint8Array(a.length + b.length);\n    c.set(a, 0);\n    c.set(b, a.length);\n\n    return c;\n  }\n\n\n  static concatMultiArrays(arrays: Uint8Array[]): Uint8Array {\n    const totalLen = arrays.reduce((a, c) => {\n      return a + c.length;\n    }, 0);\n\n    const result = new Uint8Array(totalLen);\n\n    arrays.reduce((a, c) => {\n      result.set(c, a);\n      return a + c.length;\n    }, 0);\n\n    return result;\n  }\n}", "import { SerialRawValue } from \"./SerialRawValue\";\nimport { SerialUtil } from \"./SerialUtil\";\n\nconst EXPECTED_ARRAY_SIZE = 26;\n\nexport class SerialReader {\n  private _array: Uint8Array;\n  private readonly _reader: ReadableStreamDefaultReader;\n\n  constructor(reader: ReadableStreamDefaultReader) {\n    this._reader = reader;\n    this._array = new Uint8Array();\n  }\n\n  _log(...msg: any) {\n    console.log('|SerialReader|', ...msg);\n  }\n\n  _err(...msg: any) {\n    console.error('|SerialReader|', ...msg);\n  }\n\n  private async _read(): Promise<SerialRawValue> {\n\n    //If we have enough in the array use that don't read...\n    if (this._array.length >= EXPECTED_ARRAY_SIZE) {\n      const spliced = this._array.subarray(0, EXPECTED_ARRAY_SIZE);\n      this._array = this._array.subarray(EXPECTED_ARRAY_SIZE);\n      //this._log('reading from array..', this._array.length, spliced.length);\n\n      return new SerialRawValue(spliced);\n    }\n\n    if (!this._reader) {\n      this._err('readLoop - no reader. returning');\n      throw new Error('no reader');\n    }\n\n    //read data from reader\n    const readInstance = await this._reader.read();\n    const { value, done } = readInstance;\n\n    if (done) {\n      //this._log(\"[readOnce] DONE\", done);\n      throw new Error('reader done');\n    }\n\n    //this._log('reading length', value.length);\n\n    // if match expectation, clear buffer and return..\n    if (value.length === EXPECTED_ARRAY_SIZE) {\n      //this._log('array length matched. clearing temp array..');\n      this._array = new Uint8Array();\n      return new SerialRawValue(value.subarray(0));\n    }\n\n    //otherwise, append to array\n    this._array = SerialUtil.concatArray(this._array, value);\n    //this._log('added to array. length:', this._array.length);\n\n    //then read again (recursive)\n    return await this.readOnce();\n  }\n\n\n  async readMultiple(numberToRead: number = 10): Promise<SerialRawValue[]> {\n    const array: SerialRawValue[] = [];\n    while (array.length < numberToRead) {\n      // this._log('reading..')\n      const value = await this._read();\n      array.push(value);\n    }\n\n    return array;\n  }\n\n\n  async readOnce(): Promise<SerialRawValue> {\n    const value = await this._read();\n\n    if (value) {\n      // this._log('readOnce', value.header2Bytes, value.footer2Bytes, value.rawValue.length, value.sensorTypeRaw);\n    }\n    return value;\n  }\n\n}\n", "import { SensorReadResult } from \"../data/SensorReadResult\";\nimport { SerialRawValue } from \"./SerialRawValue\";\n\n\nexport abstract class SerialDecoder {\n\n    constructor() {\n    }\n\n    _log(...msg: any) {\n        console.log('|SerialDecoder|', ...msg);\n    }\n    _err(...msg: any) {\n        console.error(\"|SerialDecoder|\", ...msg);\n    }\n\n    abstract decode(rawValue: SerialRawValue[]): Promise<SensorReadResult | null>;\n}\n\n", "import { SensorDecodedValue } from \"../data/SensorDecodedValue\";\nimport { SensorReadResult } from \"../data/SensorReadResult\";\nimport { SerialDecoder } from \"../service/SerialDecoder\";\nimport { SENSOR_VALUE, SerialRawValue } from \"../service/SerialRawValue\";\nimport { SerialNumberValue } from \"../service/SerialHexValue\";\n\nexport class HumiditySerialDecoder extends SerialDecoder {\n\n  constructor() {\n    super();\n  }\n\n  _log(...msg: any) {\n    console.log('|HumiditySerialDecoder|', ...msg);\n  }\n\n  async decode(rawValues: SerialRawValue[]): Promise<SensorReadResult | null> {\n    if (!rawValues.length) {\n      throw new Error('invlalid input. expected 1 value at least')\n    }\n\n    const rawValue = rawValues[0];\n\n    if (!rawValue.isValidLength) {\n      this._log(`invalid length ${rawValue.rawValue.length}. skipping..`);\n      return null;\n    }\n\n    const data0f = new SerialNumberValue(rawValue.getTwoBytesSignedByIndex(6)).divideByHundred();\n    const data1f = new SerialNumberValue(rawValue.getTwoBytesSignedByIndex(8)).divideByHundred();\n\n\n    const value0: SensorDecodedValue = { label: SENSOR_VALUE.TEMPERATURE, value: data0f, type: \"number\" };\n    const value1: SensorDecodedValue = { label: SENSOR_VALUE.HUMIDITY, value: data1f, type: \"number\" };\n\n    const result: SensorReadResult = {\n      sensorType: rawValue.sensorType,\n      decodedValues: [value0, value1]\n    };\n\n    return result;\n  }\n}\n", "import { SensorDecodedValue } from \"../data/SensorDecodedValue\";\nimport { SensorReadResult } from \"../data/SensorReadResult\";\nimport { SerialDecoder } from \"../service/SerialDecoder\";\nimport { SENSOR_VALUE, SerialRawValue } from \"../service/SerialRawValue\";\n\nexport class UVSerialDecoder extends SerialDecoder {\n\n    constructor() {\n        super();\n    }\n\n    _log(...msg: any) {\n        console.log('|UVSerialDecoder|', ...msg);\n    }\n\n    async decode(rawValues: SerialRawValue[]): Promise<SensorReadResult | null> {\n        if (!rawValues.length) {\n            throw new Error('invlalid input. expected 1 value at least')\n        }\n\n        const rawValue = rawValues[0];\n\n        const data0f = rawValue.getFourBytesFloatByIndex(6).toFixed(0);\n        const data1f = rawValue.getFourBytesFloatByIndex(10).toFixed(1);\n\n\n        const value0: SensorDecodedValue = { label: SENSOR_VALUE.LUX, value: data0f, type: \"number\" };\n        const value1: SensorDecodedValue = { label: SENSOR_VALUE.UV_INDEX, value: data1f, type: \"number\" };\n\n        const result: SensorReadResult = {\n            sensorType: rawValue.sensorType,\n            decodedValues: [value0, value1]\n        };\n\n        return result;\n    }\n}\n", "import { SensorDecodedValue } from \"../data/SensorDecodedValue\";\nimport { SensorReadResult } from \"../data/SensorReadResult\";\nimport { SerialDecoder } from \"../service/SerialDecoder\";\nimport { SENSOR_VALUE, SerialRawValue } from \"../service/SerialRawValue\";\n\n// Use number type for browser setTimeout return value\ntype Timeout = number;\n\nconst MAX_MS_WAIT_FOR_DATA_READY: number = 20000;\nconst INTERVAL_MS = 1000;\nconst MAX_PERCENTAGE = 100;\n\nexport class VOCSerialDecoder extends SerialDecoder {\n\n  private _hasStartedWaitingForData: boolean = false;\n  private _dataReadyPercentage: number = 0;\n  private _dataReadyIntervalId: Timeout | undefined;\n  private _incrementPercentage: number;\n\n  constructor() {\n    super();\n\n    this._incrementPercentage = INTERVAL_MS * MAX_PERCENTAGE / MAX_MS_WAIT_FOR_DATA_READY;\n  }\n\n  async decode(rawValues: SerialRawValue[]): Promise<SensorReadResult | null> {\n    if (!rawValues.length) {\n      throw new Error('invlalid input. expected 1 value at least')\n    }\n\n    const rawValue = rawValues[0];\n\n    if (!rawValue.isValidLength) {\n      this._log(`invalid length ${rawValue.rawValue.length}. skipping..`);\n      return null;\n    }\n\n    if (!this._hasStartedWaitingForData) {\n      this.startIntervalForDataReady();\n    }\n\n    const data0f = rawValue.getTwoBytesByIndex(6);\n\n    if (data0f > 0) {\n      this.clearIntervalIfRunning();\n    }\n\n    const data: VocResult = {\n      status: this._dataReadyPercentage !== MAX_PERCENTAGE ? VOC_RESULT_STATUS.PROCESSING : VOC_RESULT_STATUS.READY,\n      dataReadyPercentage: this._dataReadyPercentage,\n      value: data0f\n    }\n\n    const value0: SensorDecodedValue = { label: SENSOR_VALUE.VOC, value: data, type: \"object\" };\n\n    const result: SensorReadResult = {\n      sensorType: rawValue.sensorType,\n      decodedValues: [value0]\n    };\n\n    return result;\n  }\n\n  private clearIntervalIfRunning() {\n    if (!this._dataReadyIntervalId) {\n      return;\n    }\n\n    this._log('clearIntervalIfRunning');\n    clearInterval(this._dataReadyIntervalId);\n    this._dataReadyIntervalId = undefined;\n    this._dataReadyPercentage = MAX_PERCENTAGE;\n  }\n\n  private startIntervalForDataReady() {\n    this._log('start interval for data ready..');\n\n\n    this.runOneInterval();\n    this._dataReadyIntervalId = setInterval(() => {\n      this.runOneInterval();\n    }, INTERVAL_MS);\n\n    this._hasStartedWaitingForData = true;\n  }\n\n  private runOneInterval() {\n\n    if (this._dataReadyPercentage >= MAX_PERCENTAGE) {\n      this.clearIntervalIfRunning();\n      return;\n    }\n\n    this._dataReadyPercentage += this._incrementPercentage;\n  }\n\n}\n\nexport const VOC_RESULT_STATUS = {\n  PROCESSING: 'PROCESSING',\n  READY: 'READY',\n};\n\nexport interface VocResult {\n  dataReadyPercentage: number;\n  status: string; //VOC_RESULT_STATUS\n  value?: number;\n}\n", "import { SensorDecodedValue } from \"../data/SensorDecodedValue\";\nimport { SensorReadResult } from \"../data/SensorReadResult\";\nimport { SerialDecoder } from \"../service/SerialDecoder\";\nimport { SENSOR_VALUE, SerialRawValue } from \"../service/SerialRawValue\";\n\nexport const CONDUCTIVITY_RESULT_STATUS = {\n  MAX: 'MAX',\n  MIN: 'MIN',\n  READY: 'READY',\n};\n\nexport interface ConductivityResult {\n  status: string;\n  value: number | string;\n}\n\nconst MAX_CONDUCTANCE_VALUE = 200000;\nconst MIN_CONDUCTANCE_VALUE = 65535;\n\nexport class ConductivitySerialDecoder extends SerialDecoder {\n\n  constructor() {\n    super();\n  }\n\n  _log(...msg: any) {\n    console.log('|ConductivitySerialDecoder|', ...msg);\n  }\n\n  async decode(rawValues: SerialRawValue[]): Promise<SensorReadResult | null> {\n    if (!rawValues.length) {\n      throw new Error('invlalid input. expected 1 value at least')\n    }\n\n    const rawValue = rawValues[0];\n\n    if (!rawValue.isValidLength) {\n      this._log(`invalid length ${rawValue.rawValue.length}. skipping..`);\n      return null;\n    }\n\n    const data0f = rawValue.getTwoBytesByIndex(6);\n    const data1f = rawValue.getTwoBytesByIndex(8);\n\n    const conductivity = ConductivitySerialDecoder.calculateConductivity(data0f, data1f);\n\n\n\n    const value0: SensorDecodedValue = { label: SENSOR_VALUE.CONDUCTIVITY, value: conductivity, type: \"object\" };\n\n    const result: SensorReadResult = {\n      sensorType: rawValue.sensorType,\n      decodedValues: [value0]\n    };\n\n    return result;\n  }\n\n  private static calculateConductivity(data0: number, data1: number): ConductivityResult {\n    //Conductivity sensor returns -1 to indicate near-infinity (When nothing is connected)\n    if (data0 >= MIN_CONDUCTANCE_VALUE) {\n      const result: ConductivityResult = {\n        value: 0,\n        status: CONDUCTIVITY_RESULT_STATUS.MIN\n      };\n\n      return result;\n    }\n\n    const conductivity = Number(((1 / (data0 * data1)) * Math.pow(10, 6)).toFixed(1));\n\n    if (conductivity > MAX_CONDUCTANCE_VALUE) {\n      const result: ConductivityResult = {\n        value: 'MAX',\n        status: CONDUCTIVITY_RESULT_STATUS.MAX\n      };\n      return result;\n    }\n\n    const result: ConductivityResult = {\n      value: conductivity,\n      status: CONDUCTIVITY_RESULT_STATUS.READY\n    };\n    return result;\n  }\n}\n", "import fft from 'jsfft';\n\nconst MIN_INPUT_VALUE = 300000;\nconst MAX_INPUT_VALUE = 900000;\nconst SAMPLE_RATE = 200;\n\nconst INPUT_ARRAY_SIZE = 2048;\nconst RESULT_ARRAY_SIZE = 100;\n\nconst SOS = [\n    [[1.0000, 0, -1.0000], [1.0000, -1.9794, 0.9847]],\n    [[1.0000, 0, -1.0000], [1.0000, -1.9948, 0.9953]],\n    [[1.0000, 0, -1.0000], [1.0000, -1.9537, 0.9583]],\n    [[1.0000, 0, -1.0000], [1.0000, -1.9849, 0.9855]],\n    [[1.0000, 0, -1.0000], [1.0000, -1.9730, 0.9737]],\n    [[1.0000, 0, -1.0000], [1.0000, -1.9392, 0.9426]],\n    [[1.0000, 0, -1.0000], [1.0000, -1.9571, 0.9583]],\n    [[1.0000, 0, -1.0000], [1.0000, -1.9410, 0.9432]]\n];\n\nconst GAIN = [0.0256, 0.0256, 0.0254, 0.0254, 0.0252, 0.0252, 0.0251, 0.0251, 1.0000];\n\nexport const HEART_RATE_RESULT_STATUS = {\n    TOO_LOW: 'TOO_LOW',\n    TOO_HIGH: 'TOO_HIGH',\n    PROCESSING: 'PROCESSING',\n    READY: 'READY',\n};\n\nexport interface HeartRateResult {\n    status: string;\n    value?: number;\n}\n\nclass FixedArray {\n    private _array: number[];\n    private _size: number;\n    private _sum: number;\n\n    constructor(size: number) {\n        this._size = size;\n        this._array = [];\n        this._sum = 0;\n    }\n\n    private _log(...msg: any) {\n        console.log('|FixedArray|', ...msg);\n    }\n\n    get isAverageReady(): boolean {\n        return this._array.length >= this._size;\n    }\n\n    get average(): number {\n        return FixedArray.calcAverage(this._sum, this._array.length);\n    }\n\n    get array(): number[] {\n        return this._array;\n    }\n\n    private _cleanup() {\n        while (this._array.length > this._size) {\n            const removed = this._array.shift();\n            if (removed) {\n                this._sum -= removed;\n            }\n        }\n    }\n\n    private _add(item: number) {\n        this._array.push(item);\n        this._sum += item;\n    }\n\n    add(item: number) {\n        this._add(item);\n        this._cleanup();\n    }\n\n    addItems(items: number[]) {\n        for (const i of items) {\n            this._add(i);\n        }\n\n        this._cleanup();\n    }\n\n    static calcSum(array: number[]) {\n        return array.reduce((item, curr) => item + curr, 0);\n    }\n\n    static calcAverage(sum: number, length: number) {\n        if (!length) {\n            return 0;\n        }\n\n        return sum / length;\n    }\n\n    static createSteppedArray(startValue: number, stopValue: number, cardinality: number) {\n        const arr = [];\n        const step = (stopValue - startValue) / (cardinality - 1);\n        for (let i = 0; i < cardinality; i++) {\n            arr.push(startValue + (step * i));\n        }\n\n        return arr;\n    }\n}\n\n// Biquad filter object\nclass Biquad {\n    b: number[];\n    a: number[];\n    g1: number;\n    g2: number;\n    w: number[];\n\n    // Biquad direct form II representation, g1 and g2 are input and output gains respectively\n    constructor(b: number[], a: number[], g1: number, g2: number) {\n        this.b = b;\n        this.a = a;\n        this.g1 = g1;\n        this.g2 = g2;\n        this.w = [1, 1, 1]\n    }\n\n    _log(...msg: any) {\n        console.log('|Biquad|', ...msg);\n    }\n\n    updateFilter(x: number) {\n        const xGained = x * this.g1;\n\n        this.w[2] = this.w[1];\n        this.w[1] = this.w[0];\n        this.w[0] = xGained - this.a[1] * this.w[1] - this.a[2] * this.w[2];\n\n        const y = this.b[0] * this.w[0] + this.b[1] * this.w[1] + this.b[2] * this.w[2];\n        const yGained = y * this.g2;\n\n        return yGained;\n    }\n}\n\nexport class HeartRateProcessor {\n    private _filters: any;\n    private _resultArray: FixedArray;\n    private _inputArray: FixedArray;\n    private _xf: number[];\n\n    constructor() {\n        this._log('ctor');\n\n        this._initFilters();\n\n        const halfSampleRate = Math.floor(SAMPLE_RATE / 2);\n\n        this._resultArray = new FixedArray(RESULT_ARRAY_SIZE);\n        this._inputArray = new FixedArray(INPUT_ARRAY_SIZE);\n\n        const L = INPUT_ARRAY_SIZE;\n        const halfL = Math.floor(L / 2);\n        this._xf = FixedArray.createSteppedArray(0, halfSampleRate, halfL);\n    }\n\n    private _log(...msg: any) {\n        console.log('|HeartRateProcessor|', ...msg);\n    }\n\n    private _initFilters() {\n        this._filters = SOS.map((s, i) => new Biquad(s[0], s[1], GAIN[i], 1));\n    }\n\n    getStatusForInput(input: number): string {\n        if (input < MIN_INPUT_VALUE) {\n            return HEART_RATE_RESULT_STATUS.TOO_LOW;\n        }\n        else if (input > MAX_INPUT_VALUE) {\n            return HEART_RATE_RESULT_STATUS.TOO_HIGH;\n        }\n\n        return HEART_RATE_RESULT_STATUS.PROCESSING;\n    }\n\n    processSingleInput(input: number): HeartRateResult {\n        const status = this.getStatusForInput(input);\n        if (status !== HEART_RATE_RESULT_STATUS.PROCESSING) {\n\n            const result: HeartRateResult = { status };\n            return result;\n        }\n\n        this._inputArray.add(input);\n        const output = this.process();\n\n        if (!output) {\n            const result: HeartRateResult = { status: HEART_RATE_RESULT_STATUS.PROCESSING };\n            return result;\n        }\n\n        const result: HeartRateResult = { status: HEART_RATE_RESULT_STATUS.READY, value: output };\n        return result;\n    }\n\n    processMultiInput(inputArray: number[]): HeartRateResult {\n        for (const input of inputArray) {\n            const status = this.getStatusForInput(input);\n            if (status !== HEART_RATE_RESULT_STATUS.PROCESSING) {\n\n                const result: HeartRateResult = { status };\n                return result;\n            }\n        }\n\n        this._inputArray.addItems(inputArray);\n        const output = this.process();\n\n        if (!output) {\n            const result: HeartRateResult = { status: HEART_RATE_RESULT_STATUS.PROCESSING };\n            return result;\n        }\n\n        const result: HeartRateResult = { status: HEART_RATE_RESULT_STATUS.READY, value: output };\n        return result;\n    }\n\n    process(): number | null {\n        if (!this._inputArray.isAverageReady) {\n            return null;\n        }\n\n        const heartRate = this._process(this._inputArray);\n        if (!heartRate) {\n            return null;\n        }\n\n        this._resultArray.add(heartRate);\n        if (!this._resultArray.isAverageReady) {\n            return null;\n        }\n\n        return this._resultArray.average;\n    }\n\n    private _process(inputArray: FixedArray): number {\n        if (!inputArray.isAverageReady) {\n            throw new Error(`average is not ready. arr len: ${inputArray.array.length}`)\n        }\n\n        const filtered = inputArray.array.map((value: any) => {\n            const adjustedV = value - inputArray.average;\n            return this._updateAllFilters(adjustedV);\n        });\n\n        const dataFFT = new fft.ComplexArray(filtered.length).map((value: any, i: any, n: any) => {\n            value.real = filtered[i];\n        });\n        const spectrum = dataFFT.FFT();\n        const mag = spectrum.magnitude();\n\n        let minVal = 0;\n        let minIndex = 0;\n\n        for (let index = 0; index < mag.length / 2; index++) {\n            const element = mag[index];\n\n            if (element > minVal) {\n                minVal = element;\n                minIndex = index;\n            }\n        }\n\n        const heartRate = this._xf[minIndex] * 60;\n        return heartRate;\n    }\n\n\n    private _updateAllFilters(input: number) {\n        let output;\n\n        let current = input;\n        for (let f of this._filters) {\n            output = f.updateFilter(current);\n            current = output;\n        }\n\n        return output;\n    }\n\n}\n", "import { SensorDecodedValue } from \"../data/SensorDecodedValue\";\nimport { SensorReadResult } from \"../data/SensorReadResult\";\nimport { HeartRateProcessor, HeartRateResult } from \"../processing/HeartRateProcessor\";\nimport { SerialDecoder } from \"../service/SerialDecoder\";\nimport { SENSOR_VALUE, SerialRawValue } from \"../service/SerialRawValue\";\n\nexport class SerialHeartRateDecoder extends SerialDecoder {\n    _processor: HeartRateProcessor;\n\n    constructor() {\n        super();\n\n        this._processor = new HeartRateProcessor();\n    }\n\n    _log(...msg: any) {\n        console.log('|SerialHeartRateDecoder|', ...msg);\n    }\n\n    async decode(rawValues: SerialRawValue[]): Promise<SensorReadResult | null> {\n        if (!rawValues.length) {\n            throw new Error('invlalid input. expected 1 value at least')\n        }\n\n        const rawValue = rawValues[0];\n\n        const data0 = rawValue.getFourBytesByIndex(6);\n        const data1 = rawValue.getFourBytesByIndex(10);\n        const data2 = rawValue.getFourBytesByIndex(14);\n        const data3 = rawValue.getFourBytesByIndex(18);\n\n        const heartRateResult: HeartRateResult = this._processor.processMultiInput([data0, data1, data2, data3]);\n\n        const value0: SensorDecodedValue = { label: SENSOR_VALUE.HEART_RATE, value: heartRateResult, type: \"object\" };\n\n        const result: SensorReadResult = {\n            sensorType: rawValue.sensorType,\n            decodedValues: [value0]\n        };\n\n        return result;\n    }\n}\n", "export class MinValueThreshold {\n    LOW_THRESHOLD: number = 1e5;\n    HIGH_THRESHOLD: number = 2e6;\n\n    _isAboveHigh: boolean = false;\n\n\n    check(value: number): boolean {\n\n        if (value > this.HIGH_THRESHOLD) {\n            this._isAboveHigh = true;\n\n            return true;\n        }\n\n        if (this._isAboveHigh) {\n            if (value > this.LOW_THRESHOLD) {\n                // still above low\n                return true;\n            }\n            else {\n                this._isAboveHigh = false;\n\n                return false;\n            }\n        }\n\n        // not reached high yet\n        return false;\n    }\n}", "import { SensorDecodedValue } from \"../data/SensorDecodedValue\";\nimport { SensorReadResult } from \"../data/SensorReadResult\";\nimport { HeartRateProcessor, HEART_RATE_RESULT_STATUS } from \"../processing/HeartRateProcessor\";\nimport { MinValueThreshold } from \"../processing/MinValueThreshold\";\nimport { SerialDecoder } from \"../service/SerialDecoder\";\nimport { SENSOR_VALUE, SerialRawValue } from \"../service/SerialRawValue\";\nimport { SerialUtil } from \"../service/SerialUtil\";\n\ndeclare const HeartRateDetector: any;\n\nexport class SerialHeartRate2Decoder extends SerialDecoder {\n    _processor: HeartRateProcessor;\n\n    _detector: any;\n\n    _thresholdChecker: MinValueThreshold = new MinValueThreshold();\n    _postProcessor: HeartRateValuePostProcessor = new HeartRateValuePostProcessor();\n\n    constructor() {\n        super();\n\n        this._processor = new HeartRateProcessor();\n\n        // Detector \n        this._detector = new HeartRateDetector();\n    }\n\n    _log(...msg: any) {\n        console.log('|SerialHeartRateDecoder|', ...msg);\n    }\n\n    async decode(array: SerialRawValue[]): Promise<SensorReadResult | null> {\n        // this._log('array', array);\n        // this._log('headers-footers', rawValue.header2Bytes, rawValue.footer2Bytes);\n\n        // check the first rawvalue if the sensor is being touched\n        const sliced = array[0].rawValue.slice(0, 26);\n        const rawValue = new SerialRawValue(sliced);\n        const data0 = rawValue.getFourBytesByIndex(6);\n        const isValid = this._thresholdChecker.check(data0);\n        this._log('rawValue', data0, isValid);\n\n        const value0: SensorDecodedValue = {\n            label: SENSOR_VALUE.HEART_RATE,\n            value: {\n                status: HEART_RATE_RESULT_STATUS.TOO_LOW,\n                value: 0\n            },\n            type: \"object\"\n        };\n        const result: SensorReadResult = {\n            sensorType: array[0].sensorType,\n            decodedValues: [value0]\n        };\n\n        const subArrays = array.map(i => i.rawValue.subarray(6, 22));\n        // this._log('subArrays', subArrays);\n\n        const rawData = SerialUtil.concatMultiArrays(subArrays);\n        // this._log('rawData', rawData);\n\n        if (isValid) {\n            const heartRateResult = await this._detector.detectHeartRate(rawData);\n            this._log('heartrate-result', heartRateResult);\n\n            const postProcessedResult = this._postProcessor.process(heartRateResult);\n\n            value0.value = postProcessedResult;\n        }\n\n\n        return result;\n    }\n}\n\nclass HeartRateValuePostProcessor {\n    _wasReady = false;\n\n    process(heartrateValue: any) {\n        // if the value is processing, but the previous one was \"READY\", consider this one ready to avoid temporary status change\n        if (heartrateValue.status === HEART_RATE_RESULT_STATUS.PROCESSING && this._wasReady) {\n            heartrateValue.status = HEART_RATE_RESULT_STATUS.READY;\n        }\n\n        this._wasReady = heartrateValue.status === HEART_RATE_RESULT_STATUS.READY;\n\n        return heartrateValue;\n    }\n}", "import { SensorDecodedValue } from \"../data/SensorDecodedValue\";\nimport { SensorReadResult } from \"../data/SensorReadResult\";\nimport { SerialDecoder } from \"../service/SerialDecoder\";\nimport { SENSOR_VALUE, SerialRawValue } from \"../service/SerialRawValue\";\nimport { SerialNumberValue } from \"../service/SerialHexValue\";\n\nexport class TemperatureSerialDecoder extends SerialDecoder {\n\n  constructor() {\n    super();\n  }\n\n  _log(...msg: any) {\n    console.log('|TemperatureSerialDecoder|', ...msg);\n  }\n\n  async decode(rawValues: SerialRawValue[]): Promise<SensorReadResult | null> {\n    if (!rawValues.length) {\n      throw new Error('invlalid input. expected 1 value at least')\n    }\n\n    const rawValue = rawValues[0];\n\n    if (!rawValue.isValidLength) {\n      this._log(`invalid length ${rawValue.rawValue.length}. skipping..`);\n      return null;\n    }\n\n    const data0f = new SerialNumberValue(rawValue.getTwoBytesSignedByIndex(6)).divideByHundred();\n    const data1f = new SerialNumberValue(rawValue.getTwoBytesSignedByIndex(8)).divideByHundred();\n\n\n    const value0: SensorDecodedValue = { label: SENSOR_VALUE.INFRARED_TEMPERATURE, value: data0f, type: \"number\" };\n    const value1: SensorDecodedValue = { label: SENSOR_VALUE.AMBIENT_TEMPERATURE, value: data1f, type: \"number\" };\n\n    const result: SensorReadResult = {\n      sensorType: rawValue.sensorType,\n      decodedValues: [value0, value1]\n    };\n\n    return result;\n  }\n}\n", "import { SensorDecodedValue } from \"../data/SensorDecodedValue\";\nimport { SensorReadResult } from \"../data/SensorReadResult\";\nimport { SerialDecoder } from \"../service/SerialDecoder\";\nimport { SENSOR_VALUE, SerialRawValue } from \"../service/SerialRawValue\";\nimport { SerialNumberValue } from \"../service/SerialHexValue\";\n\nexport class Temperature2SerialDecoder extends SerialDecoder {\n\n  constructor() {\n    super();\n  }\n\n  _log(...msg: any) {\n    console.log('|Temperature2SerialDecoder|', ...msg);\n  }\n\n  async decode(rawValues: SerialRawValue[]): Promise<SensorReadResult | null> {\n    if (!rawValues.length) {\n      throw new Error('invlalid input. expected 1 value at least')\n    }\n\n    const rawValue = rawValues[0];\n\n    if (!rawValue.isValidLength) {\n      this._log(`invalid length ${rawValue.rawValue.length}. skipping..`);\n      return null;\n    }\n\n    const data0f = new SerialNumberValue(rawValue.getTwoBytesSignedByIndex(6)).divideByHundred();\n\n    const X = new SerialNumberValue(rawValue.getTwoBytesUnsignedByIndex(8)).value;\n    const a = new SerialNumberValue(rawValue.getFourBytesFloatByIndex(10)).value;\n    const b = new SerialNumberValue(rawValue.getFourBytesFloatByIndex(14)).value;\n    const c = new SerialNumberValue(rawValue.getFourBytesFloatByIndex(18)).value;\n\n    const infrared_temp = ((a * Math.pow(X, 2)) / Math.pow(10, 5) + b * X + c).toFixed(0);\n\n\n    const value0: SensorDecodedValue = { label: SENSOR_VALUE.AMBIENT_TEMPERATURE, value: data0f, type: \"number\" };\n    const value1: SensorDecodedValue = { label: SENSOR_VALUE.INFRARED_TEMPERATURE, value: infrared_temp, type: \"number\" };\n\n    const result: SensorReadResult = {\n      sensorType: rawValue.sensorType,\n      decodedValues: [value0, value1]\n    };\n\n    return result;\n  }\n}\n", "import { SerialRawValue } from \"./SerialRawValue\";\nimport { SerialReader } from \"./SerialReader\";\n\n\nexport abstract class ValueReader {\n    abstract readValue(serialReader: SerialReader): Promise<SerialRawValue[]>;\n}\n\nexport class SingleValueReader {\n    async readValue(serialReader: SerialReader): Promise<SerialRawValue[]> {\n        const value = await serialReader.readOnce();\n        return [value];\n    }\n}\n\nexport class TenValuesReader {\n    async readValue(serialReader: SerialReader): Promise<SerialRawValue[]> {\n        const values = await serialReader.readMultiple(10);\n        return values;\n    }\n}", "import { SENSOR_TYPE } from \"./SerialRawValue\";\n\nimport { SerialDecoder } from \"./SerialDecoder\";\n\nimport { HumiditySerialDecoder } from \"../decoder/SerialHumidityDecoder\";\nimport { UVSerialDecoder } from \"../decoder/SerialUVDecoder\";\nimport { VOCSerialDecoder } from \"../decoder/SerialVOCDecoder\";\nimport { ConductivitySerialDecoder } from \"../decoder/SerialConductivityDecoder\";\nimport { SerialHeartRateDecoder } from \"../decoder/SerialHeartRateDecoder\";\nimport { SerialHeartRate2Decoder } from \"../decoder/SerialHeartRate2Decoder\";\nimport { TemperatureSerialDecoder } from \"../decoder/SerialTemperatureDecoder\";\nimport { Temperature2SerialDecoder } from \"../decoder/SerialTemperature2Decoder\";\nimport { SingleValueReader, TenValuesReader, ValueReader } from \"./ValueReader\";\n\nexport class SerialDecoderFactory {\n\n    static _log(...msg: any) {\n        console.log('|SerialDecoderFactory|', ...msg);\n    }\n    static _err(...msg: any) {\n        console.error(\"|SerialDecoderFactory|\", ...msg);\n    }\n\n    static createDecoder(type: string): SerialDecoder {\n        SerialDecoderFactory._log('createDecoder');\n        SerialDecoderFactory._log('type = ' + type);\n        switch (type) {\n            case SENSOR_TYPE.UV:\n            case SENSOR_TYPE.UV2:\n                return new UVSerialDecoder();\n            case SENSOR_TYPE.HUMIDITY: return new HumiditySerialDecoder();\n            case SENSOR_TYPE.HEART_RATE: return new SerialHeartRateDecoder();\n            case SENSOR_TYPE.HEART_RATE2: return new SerialHeartRate2Decoder();\n            case SENSOR_TYPE.VOC: return new VOCSerialDecoder();\n            case SENSOR_TYPE.CONDUCTIVITY: return new ConductivitySerialDecoder();\n            case SENSOR_TYPE.TEMPERATURE: return new TemperatureSerialDecoder();\n            case SENSOR_TYPE.TEMPERATURE2: return new Temperature2SerialDecoder();\n\n            case SENSOR_TYPE.HEART_RATE2: return new SerialHeartRate2Decoder();\n\n            default:\n                throw new Error(`invalid type ${type}`);\n        }\n    }\n\n    static createReader(type: string): ValueReader {\n        SerialDecoderFactory._log('createReader');\n\n        switch (type) {\n            case SENSOR_TYPE.UV:\n            case SENSOR_TYPE.UV2:\n            case SENSOR_TYPE.HUMIDITY:\n            case SENSOR_TYPE.HEART_RATE:\n            case SENSOR_TYPE.VOC:\n            case SENSOR_TYPE.CONDUCTIVITY:\n            case SENSOR_TYPE.TEMPERATURE:\n            case SENSOR_TYPE.TEMPERATURE2:\n                return new SingleValueReader();\n\n            case SENSOR_TYPE.HEART_RATE2:\n                return new TenValuesReader();\n\n            default:\n                throw new Error(`invalid type ${type}`);\n        }\n    }\n}\n\n", "import { SensorReadResult } from \"../data/SensorReadResult\";\nimport { SerialReader } from \"./SerialReader\";\nimport { SerialDecoderFactory } from \"./SerialDecoderFactory\";\n\nclass SerialService {\n    public onSerialData?: (data: SensorReadResult) => void;\n    public onSerialConnection?: (connect: boolean) => void;\n    public onFirmwareUpdateAvailable?: (outdated: boolean) => void;\n\n    private _isConnected: boolean = false;\n    private _isReading: boolean = false;\n    private _port: any;  //TODO: TYPE\n    private _reader: any;\n\n    constructor() {\n        this._log('ctor');\n    }\n\n    private _log(...msg: any) {\n        console.log('|SerialService|', ...msg);\n    }\n    private _err(...msg: any) {\n        console.error(\"|SerialService|\", ...msg);\n    }\n    private _warn(...msg: any) {\n        console.warn(\"|SerialService|\", ...msg);\n    }\n\n    public get isReading(): boolean {\n        return this._isReading;\n    }\n\n    public get canResumeReading(): boolean {\n        // if the port is not null then we probably can resume\n        return !!this._port;\n    }\n\n    public triggerStopReading() {\n        // This will cause to exit the reading loop gracefuly\n        this._isReading = false;\n    }\n\n    private closeReader() {\n        this._log('closing reader..');\n        if (!this._reader) {\n            this._log('no reader found. exiting..');\n            return;\n        }\n\n        this.triggerStopReading();\n\n        this._log('cancelling..');\n        this._reader.cancel();\n\n        this._log('releasing lock..');\n        this._reader.releaseLock();\n\n        this._reader = null;\n        this._log('reader closed');\n    }\n\n    private async closePortAsync() {\n        this._log('closing port..');\n        if (!this._port) {\n            this._log('no port found. exiting..');\n            return;\n        }\n\n        this._isConnected = false;\n\n        try {\n            await this._port.close();\n            this._log('port closed');\n        }\n        catch (e) {\n            this._err('failed to close port', e);\n        }\n        // DO NOT UNCOMMECNT THE NEXT LINE. We keep a reference to the port so we can reuse it later\n        // this.port = null;\n\n\n        if (this.onSerialConnection) {\n            this.onSerialConnection(this._isConnected);\n        }\n\n    }\n\n    public async resumeReading() {\n        this._log('resume reading..');\n\n        if (!this._port) {\n            this._log('port not found, restarting..');\n            await this.connectAndReadAsync();\n\n            return;\n        }\n\n        return await this.startStage2ConnectPortAsync(this._port);\n    }\n\n    public async disconnectAsync() {\n        this._log('disconnecting..');\n\n        this.triggerStopReading();\n\n        setTimeout(async () => {\n            await this.stopStage2ClosePortAsync();\n        }, 0);\n    }\n\n    public async connectAndReadAsync() {\n        this._log('connect and read..');\n        const port = await this.startStage1RequestPortAsync();\n        if (!port) {\n            this._err('unable to request port');\n            return;\n        }\n\n        return await this.startStage2ConnectPortAsync(port);\n    }\n\n\n    private async startStage1RequestPortAsync() {\n        const { serial } = navigator as any;\n\n        if (!serial) {\n            alert(\"This feature only works on Chrome with 'Experimental Web Platform features' enabled\");\n            return null;\n        }\n\n        serial.onconnect = () => {\n            this._log('serial connect');\n        };\n        serial.ondisconnect = async () => {\n            this._log('serial disconnect');\n\n            await this.disconnectAsync();\n\n            this._port = null;\n        };\n\n\n        this._log('requesting port..');\n        const port = await serial\n            .requestPort({\n                filters: [{ usbVendorId: 0x04d8, vendorId: 0x04d8 }, { usbVendorId: 0x0d28, usbProductId: 0x0204 }],\n            })\n            .catch((e: Error) => {\n                this._err(`failed to serial.requestPort`, e);\n            });\n\n        if (!port) {\n            this._err(\"unable to find port value\");\n            return null;\n        }\n\n        return port;\n    }\n\n    private async startStage2ConnectPortAsync(port: any) {\n        this._log('startStage2ReadingAsync');\n\n        const connection = await this.connectPortAsync(port);\n        if (!connection) {\n            this._err('failed to connect');\n            return\n        }\n\n        this._isConnected = true;\n        this._port = connection.port;\n        this._reader = connection.reader;\n\n        if (this.onSerialConnection) {\n            this.onSerialConnection(this._isConnected);\n        }\n\n        this.startReading();\n    }\n\n    private async stopStage2ClosePortAsync() {\n        this._log('stopStage2ClosePortAsync');\n        this.closeReader();\n        await this.closePortAsync();\n    }\n\n    //TODO: PORT ANY\n    private async connectPortAsync(port: any) {\n        const portInfo = port.getInfo();\n        this._log('port info', portInfo);\n\n        if (port.readable) {\n            this._err(\"port is already readable\");\n            return null;\n        }\n\n        this._log('openning port..');\n        await port\n            .open({ baudrate: 230400, baudRate: 230400 })\n            .catch((e: Error) => {\n                this._err(`failed to port.open`, e);\n            });\n\n        if (!port.readable) {\n            this._err(`port is not readable..`);\n            return null;\n        }\n\n        const reader = port.readable.getReader();\n        if (reader.locked) {\n            this._err(\"reader is locked\");\n            return null;\n        }\n\n        return { port, reader };\n    }\n\n    private async startReading() {\n        try {\n            this._log('starting reader..');\n            const serialReader = new SerialReader(this._reader);\n\n            this._log('creating decoder..');\n            const serialValueForDecoder = await serialReader.readOnce();\n\n            if (this.onFirmwareUpdateAvailable) {\n                this.onFirmwareUpdateAvailable(serialValueForDecoder.isFirmwareOutdated);\n                this._warn(`New firmware available ? ${serialValueForDecoder.isFirmwareOutdated}`);\n            }\n\n            const decoderType = serialValueForDecoder.decoderType;\n            const sensorType = serialValueForDecoder.sensorType;\n\n            const valueReader = SerialDecoderFactory.createReader(decoderType);\n            const decoder = SerialDecoderFactory.createDecoder(decoderType);\n\n            this._log('starting loop..');\n            this._isReading = true;\n\n            while (this._isReading) {\n                const serialValues = await valueReader.readValue(serialReader);\n                const decodedValues = await decoder.decode(serialValues);\n\n                if (decodedValues) {\n                    if (sensorType !== decodedValues.sensorType) {\n                        this._err(`invalid sensor type. expecting ${sensorType}, but got ${decodedValues.sensorType}.`);\n                        continue;\n                    }\n\n                    if (this.onSerialData) {\n                        this.onSerialData(decodedValues);\n                    }\n                }\n            }\n\n            this._log('loop complete..');\n        }\n        catch (e) {\n            this._err('error reading loop startReading', e);\n        }\n        finally {\n            this.stopStage2ClosePortAsync();\n            this._log('startReading complete');\n        }\n    }\n}\n\nconst singletonInstance = new SerialService();\n\nexport default singletonInstance;\n", "// Kiwrious WebSerial SDK - ESM Entry Point\n// Main API exports\n\nimport SerialService from './service/SerialService.js';\n\n// Export data types\nexport { SensorDecodedValue } from './data/SensorDecodedValue.js';\nexport { SensorReadResult } from './data/SensorReadResult.js';\n\n// Export the main service as default\nexport default SerialService;\n\n// Also export as named export for flexibility\nexport { SerialService };\n"],
  "mappings": "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",
  "names": ["require_complex_array", "__commonJSMin", "exports", "_createClass", "defineProperties", "target", "props", "i", "descriptor", "Constructor", "protoProps", "staticProps", "_classCallCheck", "instance", "ComplexArray", "other", "arrayType", "components", "value", "iterator", "n", "mapper", "_this", "mags", "require_fft", "__commonJSMin", "exports", "_createClass", "defineProperties", "target", "props", "i", "descriptor", "Constructor", "protoProps", "staticProps", "FFT", "InvFFT", "frequencyMap", "_complex_array", "_complex_array2", "_interopRequireDefault", "obj", "_classCallCheck", "instance", "_possibleConstructorReturn", "self", "call", "_inherits", "subClass", "superClass", "PI", "SQRT1_2", "input", "ensureComplexArray", "filterer", "ComplexArray", "_baseComplexArray", "fft", "inverse", "n", "FFT_Recursive", "FFT_2_Iterative", "output", "p", "LowestOddFactor", "m", "normalisation", "recursive_result", "j", "del_f_r", "del_f_i", "f_r", "f_i", "_i", "_real", "_imag", "_ref", "_i2", "BitReverseComplexArray", "output_r", "output_i", "width", "l_index", "r_index", "left_r", "left_i", "right_r", "right_i", "_ref2", "BitReverseIndex", "index", "bitreversed_index", "array", "flips", "r_i", "_ref3", "_ref4", "sqrt_n", "factor", "SerialHexValue", "rawHexValue", "raw", "s", "e", "c", "SerialNumberValue", "value", "SENSOR_TYPE", "SENSOR_VALUE", "LATEST_SENSOR_VERSION", "SerialRawValue", "rawValue", "regex", "index", "numberOfBytes", "index0", "index1", "data0_a", "data0_b", "data0", "SerialHexValue", "index2", "index3", "data0_c", "data0_d", "SerialUtil", "a", "b", "c", "arrays", "totalLen", "result", "EXPECTED_ARRAY_SIZE", "SerialReader", "reader", "msg", "spliced", "SerialRawValue", "readInstance", "value", "done", "SerialUtil", "numberToRead", "array", "SerialDecoder", "msg", "HumiditySerialDecoder", "SerialDecoder", "msg", "rawValues", "rawValue", "data0f", "SerialNumberValue", "data1f", "value0", "SENSOR_VALUE", "value1", "UVSerialDecoder", "SerialDecoder", "msg", "rawValues", "rawValue", "data0f", "data1f", "value0", "SENSOR_VALUE", "value1", "MAX_MS_WAIT_FOR_DATA_READY", "INTERVAL_MS", "MAX_PERCENTAGE", "VOCSerialDecoder", "SerialDecoder", "rawValues", "rawValue", "data0f", "data", "VOC_RESULT_STATUS", "value0", "SENSOR_VALUE", "CONDUCTIVITY_RESULT_STATUS", "MAX_CONDUCTANCE_VALUE", "MIN_CONDUCTANCE_VALUE", "ConductivitySerialDecoder", "_ConductivitySerialDecoder", "SerialDecoder", "msg", "rawValues", "rawValue", "data0f", "data1f", "conductivity", "value0", "SENSOR_VALUE", "data0", "data1", "import_jsfft", "MIN_INPUT_VALUE", "MAX_INPUT_VALUE", "SAMPLE_RATE", "INPUT_ARRAY_SIZE", "RESULT_ARRAY_SIZE", "SOS", "GAIN", "HEART_RATE_RESULT_STATUS", "FixedArray", "_FixedArray", "size", "msg", "removed", "item", "items", "i", "array", "curr", "sum", "length", "startValue", "stopValue", "cardinality", "arr", "step", "Biquad", "b", "a", "g1", "g2", "x", "xGained", "HeartRateProcessor", "halfSampleRate", "halfL", "s", "input", "status", "output", "inputArray", "heartRate", "filtered", "value", "adjustedV", "mag", "fft", "n", "minVal", "minIndex", "index", "element", "current", "f", "SerialHeartRateDecoder", "SerialDecoder", "HeartRateProcessor", "msg", "rawValues", "rawValue", "data0", "data1", "data2", "data3", "heartRateResult", "value0", "SENSOR_VALUE", "MinValueThreshold", "value", "SerialHeartRate2Decoder", "SerialDecoder", "MinValueThreshold", "HeartRateValuePostProcessor", "HeartRateProcessor", "msg", "array", "sliced", "data0", "SerialRawValue", "isValid", "value0", "SENSOR_VALUE", "HEART_RATE_RESULT_STATUS", "result", "subArrays", "i", "rawData", "SerialUtil", "heartRateResult", "postProcessedResult", "heartrateValue", "TemperatureSerialDecoder", "SerialDecoder", "msg", "rawValues", "rawValue", "data0f", "SerialNumberValue", "data1f", "value0", "SENSOR_VALUE", "value1", "Temperature2SerialDecoder", "SerialDecoder", "msg", "rawValues", "rawValue", "data0f", "SerialNumberValue", "X", "a", "b", "c", "infrared_temp", "value0", "SENSOR_VALUE", "value1", "SingleValueReader", "serialReader", "TenValuesReader", "SerialDecoderFactory", "_SerialDecoderFactory", "msg", "type", "SENSOR_TYPE", "UVSerialDecoder", "HumiditySerialDecoder", "SerialHeartRateDecoder", "SerialHeartRate2Decoder", "VOCSerialDecoder", "ConductivitySerialDecoder", "TemperatureSerialDecoder", "Temperature2SerialDecoder", "SingleValueReader", "TenValuesReader", "SerialService", "msg", "port", "serial", "e", "connection", "portInfo", "reader", "serialReader", "SerialReader", "serialValueForDecoder", "decoderType", "sensorType", "valueReader", "SerialDecoderFactory", "decoder", "serialValues", "decodedValues", "singletonInstance", "SerialService_default", "index_default", "SerialService_default"]
}
